<html>
<head>
<title></title>
<link rel="stylesheet" href="gemTemplate.css">
</head>
<body>
<div id="content">
<p id="polarion_1">
 <br/>
</p>
<p id="polarion_2">
 <br/>
</p>
<p id="polarion_3">
 <br/>
</p>
<p id="polarion_4">
 <br/>
</p>
<p id="polarion_5">
 <br/>
</p>
<p id="polarion_6">
 <span style="font-weight: bold;text-decoration: underline;font-size: 11pt;font-family: Arial, Helvetica, sans-serif;line-height: 1.5;">
  Elektronische Gesundheitskarte und Telematikinfrastruktur
 </span>
</p>
<p id="polarion_7">
 <br/>
</p>
<p id="polarion_8">
 <br/>
</p>
<p id="polarion_9">
 <br/>
</p>
<p id="polarion_10">
 <br/>
</p>
<p id="polarion_11" style="text-align: center;">
 <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">
  Spezifikation
 </span>
</p>
<p id="polarion_12" style="text-align: center;">
 <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">
  TI-Messenger-Fachdienst
 </span>
</p>
<p id="polarion_13">
 <br/>
</p>
<p id="polarion_14">
 <br/>
</p>
<p id="polarion_15">
 <br/>
</p>
<div class="polarion-dle-wiki-block" id="polarion_editor_html_block2">
 <div contenteditable="false" id="polarion_editor_html_block_content">
 </div>
 <pre class="polarion-dle-wiki-block-source" contenteditable="false" id="polarion_editor_html_block_source">{include-macros:/macros.gematikMacros}

#renderGematikDokumentenTitel($document)</pre>
</div>
<p id="polarion_16">
</p>
<h1 id="polarion_wiki macro name=module-workitem;params=id=ML-118358">
 Dokumentinformationen
</h1>
<p id="polarion_21">
 <span style="font-weight: bold;">
  Änderungen zur Vorversion
 </span>
</p>
<p id="polarion_22">
 Anpassungen des vorliegenden Dokumentes im Vergleich zur Vorversion können Sie der nachfolgenden Tabelle entnehmen.
</p>
<p id="polarion_23">
</p>
<p id="polarion_24">
</p>
<p data-keep-next="true" id="polarion_25">
 <span style="font-weight: bold;">
  Dokumentenhistorie
 </span>
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=6" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 78px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    Version
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 86.8px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Stand
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 65.2px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Kap./ Seite
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 348.4px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Grund der Änderung, besondere Hinweise
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120.4px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Bearbeitung
    <br/>
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    1.0.0
   </td>
   <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    01.10.2021
   </td>
   <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Erstversion des Dokumentes
   </td>
   <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    gematik
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;">
    <br/>
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_27">
</p>
<h1 id="polarion_wiki macro name=module-workitem;params=id=ML-118359">
 Inhaltsverzeichnis
</h1>
<div id="polarion_wiki macro name=toc">
</div>
<p id="polarion_38">
</p>
<div contenteditable="false" data-is-landscape="false" id="polarion_wiki macro name=page_break;params=uid=1">
</div>
<h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118360">
 1 Einordnung des Dokumentes
</h2>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118361">
 1.1 Zielsetzung
</h3>
<p id="polarion_40">
 Beim vorliegenden Dokument handelt es sich um die Festlegungen zur ersten Ausbaustufe des TI-Messengers. Diese Ausbaustufe ist definiert durch die Ad-hoc-Kommunikation zwischen Organisationen des Gesundheitswesens. Dabei wird insbesondere die Ad-hoc-Kommunikation zwischen Leistungserbringern bzw. zwischen Leistungserbringerinstitutionen betrachtet. Festlegungen zur Nutzergruppe der Versicherten und Anforderungen an Kassenorganisationen
 <span id="polarion-comment:255">
 </span>
 werden in der zweiten Ausbaustufe des TI-Messengers Berücksichtigung finden und daher im vorliegenden Dokument nicht weiter betrachtet.
 <span id="polarion-comment:240">
 </span>
</p>
<p id="polarion_61">
 Die vorliegende Spezifikation definiert die Anforderungen zu Herstellung, Test und Betrieb des Produkttyps TI-Messenger-Fachdienst. Der Fachdienst ermöglicht die sichere Ad-hoc-Kommunikation zwischen Teilnehmern. Aus den Kommunikationsbeziehungen mit dem TI-Messenger-Client und dem VZD-FHIR-Directory resultieren vom TI-Messenger-Fachdienst anzubietende Schnittstellen, die in diesem Dokument normativ beschrieben werden. Vom TI-Messenger-Fachdienst genutzte Schnittstellen liegen zumeist in anderen Verantwortungsbereichen (z. B. IDP-Dienst). Diese werden in der entsprechenden Produkttypspezifikation definiert.
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118362">
 1.2 Zielgruppe
</h3>
<p id="polarion_44">
 Das Dokument richtet sich zwecks der Realisierung an Hersteller des Produkttypen Fachdienst TI-Messenger sowie an Anbieter, welche diesen Produkttypen betreiben [gemKPT_Betr]. Alle Hersteller und Anbieter von TI-Anwendungen, die Schnittstellen der Komponente nutzen, oder Daten mit dem Produkttypen Fachdienst TI-Messenger austauschen oder solche Daten verarbeiten, müssen dieses Dokument ebenso berücksichtigen.
</p>
<p id="polarion_125">
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118363">
 1.3 Geltungsbereich
</h3>
<p id="polarion_49">
 Dieses Dokument enthält normative Festlegungen zur Telematikinfrastruktur des deutschen Gesundheitswesens. Der Gültigkeitszeitraum der vorliegenden Version und deren Anwendung in Zulassungs- oder Abnahmeverfahren wird durch die gematik GmbH in gesonderten Dokumenten (z. B. gemPTV_ATV_Festlegungen, Produkttypsteckbrief, Anbietertypsteckbrief, u.a.) oder Webplattformen (z. B. gitHub, u.a.) festgelegt und bekanntgegeben.
</p>
<p id="polarion_104">
</p>
<p id="polarion_120">
 <span style="font-weight: bold;">
  Schutzrechts-/Patentrechtshinweis
 </span>
</p>
<p id="polarion_137">
 <span style="font-style: italic;">
  Die nachfolgende Spezifikation ist von der gematik allein unter technischen Gesichtspunkten erstellt worden. Im Einzelfall kann nicht ausgeschlossen werden, dass die Implementierung der Spezifikation in technische Schutzrechte Dritter eingreift. Es ist allein Sache des Anbieters oder Herstellers, durch geeignete Maßnahmen dafür Sorge zu tragen, dass von ihm aufgrund der Spezifikation angebotene Produkte und/oder Leistungen nicht gegen Schutzrechte Dritter verstoßen und sich ggf. die erforderlichen Erlaubnisse/Lizenzen von den betroffenen Schutzrechtsinhabern einzuholen. Die gematik GmbH übernimmt insofern keinerlei Gewährleistungen.
 </span>
</p>
<p id="polarion_53">
 <span style="font-style: italic;">
  <br/>
 </span>
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118364">
 1.4 Abgrenzungen
</h3>
<p id="polarion_58">
 Spezifiziert werden in dem Dokument die von dem Produkttyp bereitgestellten (angebotenen) Schnittstellen. Benutzte Schnittstellen werden hingegen in der Spezifikation desjenigen Produkttypen beschrieben, der diese Schnittstelle bereitstellt. Auf die entsprechenden Dokumente wird referenziert (siehe auch Anhang, Kapitel
 <span class="polarion-rte-link" data-item-id="ML-118392" data-option-id="longoutline" data-type="crossReference" id="fake">
 </span>
 ).
</p>
<p id="polarion_59">
 Die vollständige Anforderungslage für den Produkttyp ergibt sich aus weiteren Konzept- und Spezifikationsdokumenten, diese sind in dem Produkttypsteckbrief des Produkttyps TI-Messenger verzeichnet.
</p>
<p id="polarion_35">
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118365">
 1.5 Methodik
</h3>
<p id="polarion_179">
 Die Spezifikation ist im Stil einer RFC-Spezifikation verfasst. Dies bedeutet:
</p>
<ul id="polarion_183">
 <li>
  <span style="font-weight: bold;">
   Der gesamte Text in der Spezifikation ist sowohl für den Hersteller des Produktes TI-Messenger-Fachdienst als auch für den betreibenden Anbieter entsprechend  [gemKPT_Betr] verbindlich zu betrachten und gilt sowohl als Zulassungskriterium beim Produkt und Anbieter.
   <span id="polarion-comment:227">
   </span>
  </span>
 </li>
 <li>
  Die Verbindlichkeit SOLL durch die dem RFC 2119 [RFC2119] entsprechenden, in Großbuchstaben geschriebenen deutschen Schlüsselworte MUSS, DARF NICHT, SOLL, SOLL NICHT, KANN gekennzeichnet werden.
 </li>
 <li>
  Da in dem Beispielsatz „Eine leere Liste DARF NICHT ein Element besitzen.“ die Phrase „DARF NICHT“ semantisch irreführend wäre (wenn nicht ein, dann vielleicht zwei?), wird in diesem Dokument stattdessen „Eine leere Liste DARF KEIN Element besitzen.“ verwendet.
 </li>
 <li>
  Die Schlüsselworte KÖNNEN außerdem um Pronomen in Großbuchstaben ergänzt werden, wenn dies den Sprachfluss verbessert oder die Semantik verdeutlicht.
 </li>
</ul>
<p id="polarion_211">
 Anwendungsfälle und Akzeptanzkriterien als Ausdruck normativer Festlegungen werden als Grundlage für Erlangung der Zulassung durch Tests geprüft und nachgewiesen. Sie besitzen eine eindeutige, permanente ID, welche als Referenz verwendet werden SOLL. Die Tests werden gegen eine von der gematik gestellte Referenz-Implementierung durchgeführt.
</p>
<p id="polarion_213">
 Anwendungsfälle und Akzeptanzkriterien werden im Dokument wie folgt dargestellt:
 <br/>
 <span style="font-weight: bold;">
  &lt;ID&gt; - &lt;Titel des Anwendungsfalles / Akzeptanzkriteriums&gt;
  <br/>
 </span>
 Text / Beschreibung
 <br/>
 [&lt;=]
</p>
<p id="polarion_214">
 Die einzelnen Elemente beschreiben:
</p>
<ul id="polarion_215">
 <li>
  <span style="font-weight: bold;">
   ID
  </span>
  : einen eindeutigen Identifier.
 </li>
 <ul>
  <li>
   Bei einem Anwendungsfall besteht der Identifier aus der Zeichenfolge 'AF_' gefolgt von einer Zahl,
  </li>
  <li>
   Der Identifier eines Akzeptanzkriterium wird von System vergeben, z.B. die Zeichenfolge
   <span id="polarion-comment:224">
   </span>
   'ML_' gefolgt von einer Zahl
  </li>
 </ul>
 <li>
  <span style="font-weight: bold;">
   Titel des Anwendungsfalles / Akzeptanzkriteriums
  </span>
  : Ein Titel, welcher zusammenfassend den Inhalt beschreibt
 </li>
 <li>
  <span style="font-weight: bold;">
   Text / Beschreibung
  </span>
  : Ausführliche Beschreibung des Inhalts. Kann neben Text Tabellen, Abbildungen und Modelle enthalten
 </li>
</ul>
<p id="polarion_216">
 Dabei umfasst der Anwendungsfall bzw. das Akzeptanzkriterium sämtliche zwischen ID und Textmarke [&lt;=] angeführten Inhalte.
</p>
<p id="polarion_217">
 Der für die Erlangung einer Zulassung notwendige  Nachweis der Erfüllung des Anwendungsfalls wird in den jeweiligen  Steckbriefen festgelegt, in denen jeweils der Anwendungsfall gelistet ist. Akzeptanzkriterien werden in der Regel nicht im Steckbrief gelistet.
</p>
<p id="polarion_218">
 <span style="font-weight: bold;">
  Hinweis auf offene Punkte
 </span>
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=header=no|width=100%|uid=167" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;">
 <tbody>
  <tr>
   <td style="width: 591.6px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-style: italic;color: #3333FF;">
     Offener Punkt: Das Kapitel wird in einer späteren Version des Dokumentes ergänzt.
    </span>
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_172">
</p>
<div contenteditable="false" data-is-landscape="false" id="polarion_wiki macro name=page_break;params=uid=173">
</div>
<h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118366">
 2 Systemüberblick
</h2>
<p id="polarion_78">
 Der TI-Messenger-Fachdienst ermöglicht eine sichere Kommunikation verschiedener Teilnehmer im deutschen Gesundheitswesen. Der TI-Messenger-Fachdienst basiert auf dem offenen
 <span id="polarion-comment:210">
 </span>
 und dezentralen Kommunikationsprotokoll Matrix. Dabei stellt der Matrix Standard RESTful-APIs für die sichere Übertragung von JSON-Objekten zwischen Matrix-Clients
 <span id="polarion-comment:2">
 </span>
 und weiteren Diensten bereit. Die sichere Kommunikation zwischen den einzelnen Akteuren findet in verschlüsselter Form in Räumen auf den beteiligten Matrix-Homeservern statt.
 <br/>
 <br/>
 Der TI-Messenger-Fachdienst besteht aus dezentralen und zentralen Teilkomponenten, die ein Anbieter bereitstellen MUSS. Bei den dezentralen Teilkomponenten handelt es sich um die Messenger-Services. Die Messenger-Services beinhalten jeweils Matrix-Homeserver und Komponenten, welche dafür sorgen, dass eine Föderation der Matrix-Homeserver nur zwischen verifizierten Domains stattfindet. Diese werden in der Spezifikation als Messenger-Proxy und PASSporT-Service bezeichnet. Messenger-Services werden für einzelne Organisationen (z. B. Leistungserbringerinstitutionen, Verbände) bereitgestellt und erlauben die Nutzung durch alle Nutzer einer Organisation. Weiterhin KÖNNEN Messenger-Services durch Organisationen bereitgestellt werden, die nur für Leistungserbringer nutzbar sind. Diese unterscheiden sich technisch nicht von anderen Messenger-Services. Einzig die zugeordnete Organisation bietet ein für Leistungserbringer
 <span id="polarion-comment:242">
 </span>
 Authentifizierungsverfahren an.
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:172">
  </span>
 </span>
 <span style="background-color: #FFCCCC;">
  <br/>
  <br/>
 </span>
 Die Kommunikation zwischen einem TI-Messenger-Client und einem TI-Messenger-Fachdienst erfolgt über die Messenger-Proxies der Messenger-Services.
 <span id="polarion-comment:23">
 </span>
 Hier findet zunächst die TLS-Terminierung der Verbindungen von den TI-Messenger-Clients statt. Der Messenger-Proxy kontrolliert die Föderation durch Abfragen am Registrierungs-Dienst.
 <span id="polarion-comment:39">
 </span>
 Hierbei wird geprüft, ob die beteiligten Matrix-Homeserver registrierte Mitglieder der Föderation sind und ein Teilnehmer berechtigt ist,
 <span id="polarion-comment:16">
 </span>
 Requests auf dem Homeserver auszulösen.
 <br/>
 <br/>
 Neben den dezentralen Messenger-Services besteht der TI-Messenger-Fachdienst aus einem zentralen Registrierungs-Dienst sowie einem zentralen Push-Gateway. Über den Registrierungs-Dienst bekommt der Anbieter die Möglichkeit die Domainnamen der von ihm bereitgestellten Messenger-Services in das zentrale VZD-FHIR-Directory einzutragen, Messenger-Services automatisiert Organisationen zur Verfügung zu stellen und Domainabfragen vorzunehmen. Das Push-Gateway dient zur Übertragung von Benachrichtigungen (Notifications) an die jeweiligen TI-Messenger-Clients um den Eingang einer neuen Nachricht zu signalisieren. Für die Authentisierung von Nutzern des TI-Messenger kommen unterschiedliche Verfahren zur Anwendung. Beispielhaft soll auf die Möglichkeit der Verwendung eines IDP-Dienstes verwiesen werden.
 <span id="polarion-comment:38">
 </span>
</p>
<p id="polarion_150">
 Die folgende Abbildung zeigt einen Systemüberblick aller am TI-Messenger beteiligten Teilkomponenten in vereinfachter Form.
</p>
<p id="polarion_128">
</p>
<p id="polarion_103" style="text-align: center;">
 <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWBAMAAACWdajhAAAAG1BMVEV//9QAAABv37kPHxo/f2ovX09Pn4Rfv58fPzUApD1aAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACZklEQVR4nO2WQW/TQBCFF8dNOHa7tevjBoi4xoVWHGP10mNopZ6dnDgG+AM1SPC3mfGu7Vlhh4SmIkjvk9pmZ948P3lXmyoFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8x0Rm/07LdH7QLFsf/vm0t9OUJTvF6ht8eqzm0X8ViwXh4I4v+I+buM1np1h7jhxRrOn8xiyVmtybO1rN8qyMTJxfBU0e7DpjrfXc+00v780irjKruPe+kV7xekbrW/1N+YLzqoeFaFyljV0Y653WiVIrrY1VE5Kkkcm1Xsom2YhOEIs+Zzmv695jI71QEf3W38lV+YLzamJ5kan0QCyzHmsb6btJRU9J7Nsfkb62qzPRrJ8vOs1b57JZxzqxX1OKcf1qlXLtdWJnGa9tQa556QudlxSldmATL5X6WMb0TkYXqnhUfIKsOklFkwdlR8YiQb5R8Xl97uKsltKbrixryVEVC1/ovELR0Nni0ZdkQN7VRrmDTZ+7Jv+RHRmLPlJrnNQ9+mEpPaooec2uq6UvdF6haFusEW0aeed2KJbsDMZSupbyqVqIWK4QxupEzx8rOnSsw2ziJGv2x2nFJkqvULQtFh1WceR7YsnOi9OBWCd1ZBoIY7mC9+LhQNTa9cQSF8RDbyzZGZ33xlpHxZmTfok+bUQsV/BePByIWrueWP46HbtLsyeW7MTiOu1i8WEpm+tUy1iu4L3i7jp1otauL1b75fOh7I0VdOpvpN/e1o3+6Sbe5OZBbqIreC8eDkSt3bOww7+I/wLE2ocjjQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAx8Yv0dGgYPUMKHsAAAAASUVORK5CYII=" style="width: 500px;height: 344px;"/>
</p>
<p id="polarion_73" style="text-align: center;">
 <span id="polarion-comment:3">
 </span>
</p>
<p class="polarion-rte-caption-paragraph" id="polarion_66" style="text-align: center;">
 Abbildung
 <span class="polarion-rte-caption" data-sequence="Abbildung">
  #
 </span>
 : Systemüberblick (Vereinfachte Darstellung)
</p>
<p id="polarion_18">
</p>
<h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118367">
 3 Systemkontext
</h2>
<p id="polarion_20">
 Der folgende Abschnitt setzt den TI-Messenger-Fachdienst in den Systemkontext des TI-Messenger-Dienstes.
 <span id="polarion-comment:6">
 </span>
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118369">
 3.1 Nachbarsysteme
</h3>
<p id="polarion_19">
 <span style="background-color: #FFFFFF;">
  Für den Betrieb des TI-Messenger-Fachdienstes werden weitere Systeme benötigt. Dazu gehört der Smartcard-IDP-Dienst der gematik und das VZD-FHIR-Directory. Die Abbildung
  <span style="font-style: italic;">
   Systemüberblick
  </span>
  aus Kapitel 2 zeigt deren Beziehung zum TI-Messenger-Fachdienst.
  <span id="polarion-comment:226">
  </span>
 </span>
</p>
<p id="polarion_90">
 Der Smartcard-IDP-Dienst
 <span id="polarion-comment:217">
 </span>
 stellt allen berechtigten Teilnehmern ID_TOKEN (AuthN)
 <span id="polarion-comment:148">
 </span>
 sowie
 <span style="text-decoration: line-through;">
  <span id="polarion-comment:173">
  </span>
 </span>
 ACCESS_TOKEN (AuthZ)
 <span style="text-decoration: line-through;">
  <span id="polarion-comment:174">
  </span>
 </span>
 , gemäß des OpenID Foundation [OpenID] spezifizierten Protokolls,
 <span id="polarion-comment:47">
 </span>
 zur Verfügung. Mit den ausgestellten Token erfolgt die notwendige Authentisierung der TI-Messenger-Nutzer bei der initialen Registrierung eines Messenger-Service für eine Organisation, oder für schreibenden Zugriff auf das VZD-FHIR-Directory mittels TI-Messenger-Client. Dazu ist es notwendig das der TI-Messenger-Client und das Frontend des Registrierungs-Dienstes sich bei dem
 <span id="polarion-comment:243">
 </span>
 Smartcard IDP-Dienst registriert. Damit ist sichergestellt das Änderungen an den VZD-FHIR-Directory Einträgen durch den TI-Messenger-Client möglich sind.
</p>
<p id="polarion_209">
 Das zentrale VZD-FHIR-Directory bildet ein Verzeichnis aller TI-Messenger-Fachdienste, Organisationen und Leistungserbringer
 <span id="polarion-comment:30">
 </span>
 und bietet die Möglichkeit der Suche von Teilnehmern anhand konfigurierter Merkmale. Der TI-Messenger-Fachdienst trägt bei erfolgreicher Aufnahme in die Föderation im VZD-FHIR-Directory (in die Organisationsressource) seine Matrix-Domain ein.
 <span id="polarion-comment:48">
 </span>
 Das VZD-FHIR-Directory vertraut den Matrix-Homerservern der jeweiligen Messenger-Services, wenn die Domain des Messenger-Service erfolgreich in das VZD-FHIR-Directory eingetragen wurde.
 <span style="text-decoration: line-through;background-color: #FFFFCC;">
  <span id="polarion-comment:165">
  </span>
 </span>
</p>
<p id="polarion_97">
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122232">
 3.2 Messenger-Services
</h3>
<p id="polarion_141">
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:199">
  </span>
 </span>
 <span id="polarion-comment:218">
 </span>
 Durch TI-Messenger-Anbieter werden Messenger-Services jeweils für eine Organisation des Gesundheitswesens (z. B. Arztpraxis, Krankenhaus, Apotheke, Verband, etc.) bereitgestellt. Die Bereitstellung erfolgt durch den Registrierungs-Dienst eines TI-Messenger-Anbieters dezentral und kann
 <span style="font-style: italic;">
  on-premise
 </span>
 oder innerhalb von Rechenzentren stattfinden. Jeder Messenger-Service MUSS einer Organisation zugeordnet sein. Die Messenger-Services unterscheiden sich nur in den jeweils verwendeten Authentifizierungsverfahren. Diese werden durch die jeweilige Organisation festgelegt und bereitgestellt. Die jeweilige Organisation MUSS die Kontrolle über die Benutzerverwaltung haben, um zu jedem Zeitpunkt Nutzer aus dem TI-Messenger ausschließen zu können. Dabei MÜSSEN Nutzer vom Messenger-Service gelöscht/gesperrt werden, wenn der Nutzer innerhalb der Nutzerverwaltung gelöscht/gesperrt wurde.
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:190">
  </span>
  <span id="polarion-comment:191">
  </span>
  <span id="polarion-comment:194">
  </span>
 </span>
</p>
<p id="polarion_131">
 <span style="font-weight: bold;background-color: #FFFFCC;">
  <br/>
 </span>
 <span style="font-weight: bold;">
  Authentifizierungsverfahren
 </span>
</p>
<p id="polarion_39">
 Messenger-Services können je nach Art der Organisation verschiedene Authentifizierungsverfahren anbieten. Sind bereits Systeme wie Active-Directory oder LDAP innerhalb einer Organisation verfügbar, können diese entsprechend genutzt werden, indem der Matrix-Homeserver bei diesen registriert wird. Sind keine Authentifizierungsverfahren vorhanden (z. B. innerhalb einer Arztpraxis) KÖNNEN TI-Messenger-Anbieter entsprechende Authentifizierungsverfahren zur Verfügung stellen. Diese erlauben einen Login für Nutzer (z. B. Benutzername/Passwort und einen zweiten Faktor) und können auch von weiteren Systemen nachgenutzt werden.
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:195">
  </span>
 </span>
 Die nachfolgende Abbildung verdeutlicht das Authentifizieren von Nutzern an einen Messenger-Service.
 <br/>
</p>
<p data-keep-next="true" id="polarion_118" style="text-align: center;">
 <span style="text-decoration: line-through;">
  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWBAMAAACWdajhAAAAG1BMVEV//9QAAABv37kPHxo/f2ovX09Pn4Rfv58fPzUApD1aAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACZklEQVR4nO2WQW/TQBCFF8dNOHa7tevjBoi4xoVWHGP10mNopZ6dnDgG+AM1SPC3mfGu7Vlhh4SmIkjvk9pmZ948P3lXmyoFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8x0Rm/07LdH7QLFsf/vm0t9OUJTvF6ht8eqzm0X8ViwXh4I4v+I+buM1np1h7jhxRrOn8xiyVmtybO1rN8qyMTJxfBU0e7DpjrfXc+00v780irjKruPe+kV7xekbrW/1N+YLzqoeFaFyljV0Y653WiVIrrY1VE5Kkkcm1Xsom2YhOEIs+Zzmv695jI71QEf3W38lV+YLzamJ5kan0QCyzHmsb6btJRU9J7Nsfkb62qzPRrJ8vOs1b57JZxzqxX1OKcf1qlXLtdWJnGa9tQa556QudlxSldmATL5X6WMb0TkYXqnhUfIKsOklFkwdlR8YiQb5R8Xl97uKsltKbrixryVEVC1/ovELR0Nni0ZdkQN7VRrmDTZ+7Jv+RHRmLPlJrnNQ9+mEpPaooec2uq6UvdF6haFusEW0aeed2KJbsDMZSupbyqVqIWK4QxupEzx8rOnSsw2ziJGv2x2nFJkqvULQtFh1WceR7YsnOi9OBWCd1ZBoIY7mC9+LhQNTa9cQSF8RDbyzZGZ33xlpHxZmTfok+bUQsV/BePByIWrueWP46HbtLsyeW7MTiOu1i8WEpm+tUy1iu4L3i7jp1otauL1b75fOh7I0VdOpvpN/e1o3+6Sbe5OZBbqIreC8eDkSt3bOww7+I/wLE2ocjjQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAx8Yv0dGgYPUMKHsAAAAASUVORK5CYII=" style="width: 506px;height: 230px;"/>
 </span>
</p>
<p class="polarion-rte-caption-paragraph" id="polarion_55" style="text-align: center;">
 Abbildung
 <span class="polarion-rte-caption" data-sequence="Abbildung">
  #
 </span>
 : Beispiel - Authentifizierung von Nutzern einer Organisation
</p>
<p id="polarion_136">
</p>
<p id="polarion_174">
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:175">
  </span>
 </span>
</p>
<p id="polarion_185">
 <span style="font-weight: normal;background-color: #FFFFCC;">
  <span id="polarion-comment:162">
  </span>
  <span id="polarion-comment:171">
  </span>
 </span>
</p>
<p id="polarion_195">
 <span style="text-decoration: line-through;background-color: #FFFFCC;">
  <span id="polarion-comment:51">
  </span>
  <span id="polarion-comment:219">
  </span>
 </span>
</p>
<h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118371">
 4 Übergreifende Festlegungen
</h2>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118967">
 4.1 Datenschutz und Sicherheit
</h3>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123614|layout=3">
 <a name="ML-123614">
 </a>
 <dl>
  <dt>
   ML-123614 - Verbot von Organisationsaccounts für Versicherte
  </dt>
  <dd>
   Der Anbieter MUSS sicherstellen, dass organisationsbasierte TI-Messenger-Accounts nicht an Versicherte vergeben werden. Er MUSS sicherstellen, dass nur Accounts an Personen vergeben werden, mit denen ein Beschäftigungsverhältnis besteht. Hierzu ist eine organisatorische Lösung ausreichend.
   <br/>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123618|layout=3">
 <a name="ML-123618">
 </a>
 <dl>
  <dt>
   ML-123618 - PUSH-Benachrichtigungen
  </dt>
  <dd>
   TI-Messenger-Anbieter MÜSSEN dafür sorgen, dass diese Gateways externe PUSH-Dienste datenschutzkonform nutzen. Hierzu wurden folgende Kriterien definiert, die in jedem Fall beachtet werden MÜSSEN:
   <ul>
    <li>
     PUSH-Benachrichtigungen dürfen erst nach expliziter Zustimmung der Nutzer erfolgen (Opt-In).
    </li>
    <li>
     Alle PUSH-Nachrichteninhalte, auf die der PUSH-Anbieter nicht zugreifen können muss,
     <span id="polarion-comment:53">
     </span>
     MÜSSEN verschlüsselt werden.
    </li>
    <li>
     PUSH-Nachrichten MÜSSEN vor dem Versenden um einen Zufallswert von 0-10 Sekunden verzögert werden um Timingbasierte Profilbildung zu erschweren.
    </li>
    <li>
     Wo
     <span id="polarion-comment:209">
     </span>
     möglich, MÜSSEN PUSH-Anbieter gewählt werden, die eine Wahrung der Betroffenenrechte für personenbezogene Informationen ermöglichen.
    </li>
    <li>
     Wenn ein Zielclient gerade aktiv ist, soll dieser selbsttätig auf einkommende Nachrichten lauschen und nicht per PUSH benachrichtigt werden.
    </li>
    <li>
     PUSH-Nachrichten dürfen keine Nachrichteninhalte enthalten, ihre Funktion besteht lediglich darin Clientsysteme zu informieren, dass Nachrichten abrufbar sind und eine Synchronisierung mit dem Homeserver nötig ist. Es DARF nur die Room-ID und Event-ID enthalten sein.
     <span id="polarion-comment:87">
     </span>
     <br/>
     <span id="polarion-comment:54">
     </span>
    </li>
   </ul>
  </dd>
 </dl>
</div>
<p id="polarion_74">
 Für Details der Verschlüsselung und enthaltene personenbezogene Daten siehe [MSC 3013].
 <span id="polarion-comment:233">
 </span>
 <span id="polarion-comment:247">
 </span>
</p>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123615|layout=3">
 <a name="ML-123615">
 </a>
 <dl>
  <dt>
   ML-123615 - Flächendeckende Verwendung von TLS
  </dt>
  <dd>
   Betreiber und Hersteller MÜSSEN sicherstellen, dass sämtliche Verbindungen zwischen Komponenten des TI-Messengers mittels TLS
   <span id="polarion-comment:55">
   </span>
   kommunizieren, sofern diese Kommunikation die Grenzen einer
   <span id="polarion-comment:211">
   </span>
   virtuellen/physischen Maschine überschreitet. Hierzu MUSS mindestens serverseitig authentizitätsgeschütztes TLS verwendet werden. Sofern kein beidseitiges TLS verwendet wird, MUSS die Authentizität der Clientseite mit gleichwertiger Sicherheit
   <span style="text-decoration: line-through;">
    <span id="polarion-comment:200">
    </span>
   </span>
   sichergestellt werden.
   <span id="polarion-comment:157">
   </span>
   Es gelten die Festlegungen aus [gemSpec_Krypt].
   <span style="background-color: #FFFF99;">
    <span id="polarion-comment:208">
    </span>
    <br/>
   </span>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123616|layout=3">
 <a name="ML-123616">
 </a>
 <dl>
  <dt>
   ML-123616 - Abweichungen vom Matrix-Standard
  </dt>
  <dd>
   Hersteller von TI-Messenger-Komponenten MÜSSEN sämtliche, nicht in der TI-Messenger-Spezifikation beschriebenen, Abweichungen vom Matrix-Protokoll oder den MUST- oder SHOULD-Empfehlungen des Matrix-Protokolls dokumentieren und begründen.
   <br/>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123617|layout=3">
 <a name="ML-123617">
 </a>
 <dl>
  <dt>
   ML-123617 - Löschfristen für Homeserver
  </dt>
  <dd>
   Betreiber MÜSSEN sicherstellen, dass Events, Gesprächsinhalten und mit einzelnen Gesprächen assoziierte Daten (z.B. versandte Dateien) maximal für 6 Monate auf Homeservern verbleiben und danach gelöscht werden.
   <br/>
   Hersteller MÜSSEN eine Funktion für Homeserver anbieten, über die eine Löschfrist für diese Daten konfigurierbar ist.
   <br/>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123621|layout=3">
 <a name="ML-123621">
 </a>
 <dl>
  <dt>
   ML-123621 - Interoperabilität von Zusatzfunktionen für den TI-Messenger-Fachdienst
  </dt>
  <dd>
   Hersteller MÜSSEN sicherstellen, dass alle implementierten Funktionen, die über den gewöhnlichen Funktionsumfang einer TI-Messenger-Komponente hinausgehen die Sicherheit des Produkts nicht gefährden und die Interoperabilität mit anderen TI-Messenger-Produkten erhalten. Ebenso MÜSSEN Hersteller sicherstellen, dass TI-Messenger-Fachdienstbestandteile resilient auf unerwartete Eingaben reagieren.
   <br/>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123619|layout=3">
 <a name="ML-123619">
 </a>
 <dl>
  <dt>
   ML-123619 - Protokollierung zum Zwecke der Fehler- bzw. Störungsbehebung
  </dt>
  <dd>
   <span style="font-size: 10pt;color: #000000;background-color: #FFFFFF;line-height: 1.5;">
    Falls im TI-Messenger-Fachdienst eine Protokollierung zum Zwecke der Fehler- bzw. Störungsbehebung erfolgt, MUSS der Fachdienst unter Berücksichtigung des Art. 25 Abs. 2 DSGVO sicherstellen, dass in den Protokolldaten entsprechend dem Datenschutzgrundsatz nach Art. 5 DSGVO nur personenbezogene Daten in der Art und dem Umfang enthalten sind, wie sie zur Behebung erforderlich sind und dass die erzeugten Protokolldaten im Fachdienst nach der Behebung unverzüglich gelöscht werden.
   </span>
   <span style="font-size: 10pt;color: #000000;line-height: 1.5;">
    Sofern andere gesetzliche Grundlagen wie §331 SGB V nicht überwiegen sind hierzu nur anonymisierte Daten zu protokollieren.
   </span>
   <span style="font-size: 10pt;color: #000000;background-color: #FFFF99;line-height: 1.5;">
    <span id="polarion-comment:230">
    </span>
   </span>
   <span style="font-size: 10pt;color: #000000;background-color: #FFFFFF;line-height: 1.5;">
    <br/>
   </span>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123620|layout=3">
 <a name="ML-123620">
 </a>
 <dl>
  <dt>
   ML-123620 - Explizites Verbot von Profiling für TI-Messenger-Anbieter
  </dt>
  <dd>
   Anbieter von TI-Messenger-Komponenten DÜRFEN NICHT Daten zu Profilingzwecken sammeln. Dies betrifft insbesondere eine Überwachung welche Akteure mit welchen anderen Akteuren kommunizieren.
   <span id="polarion-comment:228">
   </span>
   <br/>
   <br/>
   Die gematik kann nach § 331 Abs. 2 SGB V Daten festlegen, die Anbieter von Komponenten und Dienste der gematik offenzulegen bzw. zu übermitteln haben, sofern diese erforderlich sind, um den gesetzlichen Auftrag der gematik zur Überwachung des Betriebs zur Gewährleistung der Sicherheit, Verfügbarkeit und Nutzbarkeit der Telematikinfrastruktur zu erfüllen. Nur die hierfür erforderlichen personenbezogenen Daten dürfen von den Anbietern und Herstellern als Ausnahme vom Profilingverbot erhoben und ausschließlich für den genannten Zweck verwendet werden.
   <span id="polarion-comment:258">
   </span>
   <br/>
   <span id="polarion-comment:231">
   </span>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123622|layout=3">
 <a name="ML-123622">
 </a>
 <dl>
  <dt>
   ML-123622 - Behandlung von kryptographischem Material für OAuth
  </dt>
  <dd>
   Betreiber von TI-Messenger-Messenger-Fachdiensten MÜSSEN sicherstellen, dass kryptographisches Material für OAuth, wie z.B. Client-ID und Client-Secret für Authentisierung mittels Credential-Flow sicher eingebracht werden. Dieses Material MUSS in Hardware Security Modules sicher gespeichert werden.
  </dd>
 </dl>
</div>
<p class="MsoNormal" id="polarion_229">
 Zum Nachweis der Umsetzung ist lediglich eine Prüfung der Prozesse zur Einbringung erforderlich. Eine Auditierung der Umsetzung ist optional.
</p>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123628|layout=3">
 <a name="ML-123628">
 </a>
 <dl>
  <dt>
   ML-123628 - Device Verification, Cross-Signing und SSSS für TI-Messenger-Fachdienste
  </dt>
  <dd>
   Hersteller MÜSSEN sicherstellen, dass die Funktionen Cross-Signing und Secure Secret Storage and Sharing
   <span style="font-size: 12pt;color: #333333;line-height: 1.5;">
    (
   </span>
   SSSS)
   <span id="polarion-comment:101">
   </span>
   zur Device Verification unterstützt werden. Es MUSS die Spezifikation hinsichtlich Ende-zu-Ende Verschlüsselung vollständig befolgt werden.
   <span style="font-size: 11pt;background-color: #FFFF00;line-height: 1.5;">
    <br/>
   </span>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123638|layout=3">
 <a name="ML-123638">
 </a>
 <dl>
  <dt>
   ML-123638 - Explizites Verbot von Profiling für TI-Messenger-Fachdienste
  </dt>
  <dd>
   Betreiber von TI-Messenger-Komponenten DÜRFEN NICHT Daten zu Profilingzwecken sammeln. Dies betrifft insbesondere eine Überwachung welche Akteure mit welchen anderen Akteuren kommunizieren.
   <span id="polarion-comment:229">
   </span>
   <br/>
   <br/>
   Die gematik kann nach § 331 Abs. 2 SGB V Daten festlegen, die Anbieter von Komponenten und Dienste der gematik offenzulegen bzw. zu übermitteln haben, sofern diese erforderlich sind, um den gesetzlichen Auftrag der gematik zur Überwachung des Betriebs zur Gewährleistung der Sicherheit, Verfügbarkeit und Nutzbarkeit der Telematikinfrastruktur zu erfüllen. Nur die hierfür erforderlichen personenbezogenen Daten dürfen von den Anbietern und Herstellern als Ausnahme vom Profilingverbot erhoben und ausschließlich für den genannten Zweck verwendet werden.
   <span id="polarion-comment:259">
   </span>
   <br/>
   <span id="polarion-comment:232">
   </span>
  </dd>
 </dl>
</div>
<p id="polarion_62">
 <span style="text-decoration: line-through;background-color: #FFFF99;">
  <span id="polarion-comment:205">
  </span>
  <span id="polarion-comment:207">
  </span>
 </span>
 <br/>
 <span id="polarion-comment:125">
 </span>
</p>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123637|layout=3">
 <a name="ML-123637">
 </a>
 <dl>
  <dt>
   ML-123637 - Sicherheitsrisiken von Software-Bibliotheken minimieren
  </dt>
  <dd>
   Hersteller von TI-Messenger-Fachdiensten MÜSSEN
   <span id="polarion-comment:206">
   </span>
   Maßnahmen umsetzen, um die Auswirkung von unentdeckten Schwachstellen in benutzten Software-Bibliotheken zu minimieren.
   <br/>
   Hinweis:  Beispielmaßnahmen sind in [OWASP Proactive Control#C2] zu finden. Das gewählte Verfahren MUSS die gleiche Wirksamkeit aufweisen, wie die Kapselung gemäß [OWASP Proactive Control#C2 Punkt 4].
   <br/>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123635|layout=3">
 <a name="ML-123635">
 </a>
 <dl>
  <dt>
   ML-123635 - CC-Evaluierung als Ersatz für Gutachten
  </dt>
  <dd>
   Falls der Hersteller entscheidet, eine CC-Zertifizierung statt eines Produktgutachtens durchzuführen, MUSS der Hersteller
   <span id="polarion-comment:222">
   </span>
   bei der Einreichung eines CC-Zertifizierungsantrags sein Security-Target-Dokument der gematik zur Verfügung stellen. In diesem MÜSSEN mindestens beschrieben sein:
   <ul>
    <li>
     die zusätzlichen Funktionen des TI-Messenger-Clients des Nutzers,
    </li>
    <li>
     die in den zusätzlichen Funktionen verarbeiteten Daten,
    </li>
    <li>
     die Schnittstellen zwischen dem TI-Messenger-Clients des Nutzers und den ggf. genutzten Backend-Diensten der zusätzlichen Funktionen inklusive ihrer Sicherheitsmaßnahmen und
    </li>
    <li>
     die Sicherheitsannahmen an den TI-Messenger-Clients des Nutzers und die Ausführungsumgebung
     <br/>
     <span id="polarion-comment:40">
     </span>
    </li>
   </ul>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123634|layout=3">
 <a name="ML-123634">
 </a>
 <dl>
  <dt>
   ML-123634 - Sichere Produktentwicklung und Nachweise
  </dt>
  <dd>
   Der Hersteller MUSS innerhalb des Produktlebenszyklus (Entwicklung, Betrieb, Außerbetriebnahme) seines Produktes Sicherheitsaktivitäten integrieren und anwenden, d. h. in einschlägigen Fachkreisen anerkannte, erprobte und bewährte Regeln anwenden.
   <br/>
   Der Hersteller MUSS die Sicherheits- und Datenschutzmaßnahmen für sein Produkt in einem Sicherheits- und Datenschutzkonzept dokumentieren und auf Verlangen der gematik zur Verfügung stellen.
   <br/>
   Der Hersteller MUSS einen Testplan für Sicherheitstests erstellen und auf Verlangen der gematik zur Verfügung stellen. Dieser MUSS umgesetzt werden und der gematik bei jeder Veröffentlichung einer Produktversion als neuer Bericht vorgelegt werden.
   <br/>
   Der Hersteller des TI-Messenger-Clients für Nutzer MUSS während der Entwicklung des Produktes implementierungsspezifische Sicherheitsanforderungen dokumentieren und umsetzen.
   <br/>
   Der Hersteller MUSS ein sicherheitsrelevanten Softwarearchitektur-Review durchführen und identifizierte Architekturschwachstellen beheben. Dieses Review MUSS nach jeder Architekturänderung mit Sicherheitsrelevanz wiederholt werden.
   <br/>
   Der Hersteller MUSS eine Bedrohungsanalyse durchführen und Maßnahmen gegen die identifizierten Bedrohungen implementieren.
   <br/>
   Der Hersteller MUSS während der Entwicklung des Produktes sicherheitsrelevante Quellcode-Reviews oder automatisierte sicherheitsrelevante Quellcode-Scans durchführen.
   <br/>
   Der Hersteller MUSS während der Entwicklung des Produktes automatisierte Sicherheitstests durchführen.
   <br/>
   Der Hersteller MUSS einen Schulungsplan zur regelmäßigen Schulung von Entwicklern in sicherer Entwicklung und Secure-Coding-Techniken dokumentieren und umsetzen.
   <br/>
   Der Hersteller MUSS alle Entwickler des Produktes in sicherer Entwicklung und Secure-Coding-Techniken schulen. Hierzu MUSS der Hersteller sicherstellen, dass alle Entwickler zu Beginn der Entwicklung geschult sind. Er SOLL für diese anschließend auch laufende Weiterbildung durchführen.
   <span style="background-color: #FFFF99;">
    <span id="polarion-comment:235">
    </span>
   </span>
   <br/>
   Der Hersteller MUSS den verwendeten sicheren Produktlebenszyklus und deren Teilprozesse dokumentieren und auf Nachfrage der gematik zur Verfügung stellen. Die Dokumentation soll mindestens die folgenden Sicherheitsaktivitäten beschreiben:
   <ul>
    <li>
     Erfassen und Umsetzen von implementierungsspezifischen Sicherheitsanforderungen für den Client und von Best-Practice-Sicherheitsanforderungen,
    </li>
    <li>
     Durchführen von sicherheitsrelevanten Architektur- und Design-Reviews,
    </li>
    <li>
     Durchführen von Bedrohungsanalysen,
    </li>
    <li>
     Durchführen von sicherheitsrelevanten Quellcode-Reviews,
    </li>
    <li>
     Durchführen von Sicherheitstests während der Qualitätssicherungsphase,
    </li>
    <li>
     Etablieren von Quality Gates, die eine Veröffentlichung des Clients mit 'Mittel' oder 'Hoch' bewerteten Sicherheitsfehlern verhindert
    </li>
    <li>
     Änderungs- und Konfigurationsmanagement,
    </li>
    <li>
     Schwachstellen-Management
    </li>
   </ul>
   Der Hersteller MUSS während der Entwicklung des Produktes einen Änderungs- und Konfigurationsmanagementprozess verwenden. Das Änderungsmanagement umfasst mindestens den Entscheidungsprozess über vorgeschlagene Änderungen und die Autorisierung der Änderungen. Das Konfigurationsmanagement liefert mindestens zu jedem Zeitpunkt die eindeutige Zusammensetzung des Produktes bezüglich seiner eindeutigen Komponenten (Dritt-Software wie Bibliotheken und Frameworks) und den vorgenommenen Änderungen an eigenen Komponenten.
   <br/>
   Der Hersteller MUSS bei Veröffentlichung einer neuen Produktversion des Produktes die Einhaltung der Herstellererklärung sicherheitstechnische Eignung durch seinen Datenschutzbeauftragten verifizieren.
   <br/>
  </dd>
 </dl>
</div>
<p id="polarion_70">
 <span id="polarion-comment:236">
 </span>
</p>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123623|layout=3">
 <a name="ML-123623">
 </a>
 <dl>
  <dt>
   ML-123623 - Nur Verbindungen mit zugelassenen TI-Messenger-Clients
  </dt>
  <dd>
   Der Messenger-Proxy MUSS prüfen, ob sich der TI-Messenger-Client als von der gematik zugelassenes Produkt ausweisen kann. Verbindungen mit nicht zugelassenen Clients MÜSSEN unterbunden werden.
   <span style="background-color: #FFFF00;">
    <br/>
   </span>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-124882|layout=3">
 <a name="ML-124882">
 </a>
 <dl>
  <dt>
   ML-124882 - Kein Einbringen vertraulicher Informationen in Room-States durch Organisationsadministratoren
  </dt>
  <dd>
   Anbieter von Home-Servern MÜSSEN sicherstellen, dass sie als Organisations-Administratoren keine sensiblen Informationen in Room-States einbringen. Ebenso MÜSSEN sie Organisations-Administratoren von Homeservern unter Kundenverwaltung informieren, dass im Room-State sichtbare Informationen gegenwärtig nicht verschlüsselt sind. Sobald durch die geplante Matrix-Spec-Changes (MSCs) die Möglichkeit geschaffen wurde vertrauliche Informationen sicher im Room-State zu speichern, wird dies direkt durch die Matrix-Spezifikation abgedeckt.
   <span id="polarion-comment:251">
   </span>
   <br/>
   <br/>
   <span id="polarion-comment:241">
   </span>
  </dd>
 </dl>
</div>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-119137">
 4.2 Authentifizierung von Nutzern
</h3>
<p id="polarion_160">
 Im TI-Messenger-Kontext werden gemäß [gemSpec_TI_Messenger-Dienst#Akteure und Rollen] zwischen folgenden
 <span style="text-decoration: line-through;">
 </span>
 Rollen
 <span id="polarion-comment:178">
 </span>
 <span id="polarion-comment:216">
 </span>
 unterschieden:
</p>
<p id="polarion_75">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_221" style="text-align: left;">
 Tabelle
 <span class="polarion-rte-caption" data-sequence="Tabelle">
  #
 </span>
 : Authentifizierung von Nutzerrollen
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=3" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 95.0312px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Rolle
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 289.094px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix-Homeserver
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 297.109px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    VZD-FHIR-Directory
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 95.0312px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    User-HBA
   </td>
   <td rowspan="3" style="text-align: left;vertical-align: top;width: 289.094px;height: 117px;border: 1px solid #CCCCCC;padding: 5px;">
    Authentifizieren mittels des vereinbarten Authentifizierungsverfahren
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 297.109px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    Schreibzugriff: HBA (C.HP.AUT)
    <br/>
    Lesezugriff: Matrix-OpenID-Token
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 95.0312px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    User
   </td>
   <td style="text-align: left;vertical-align: top;width: 297.109px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Lesezugriff: Matrix-OpenID-Token
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 95.0312px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    Org-Admin
   </td>
   <td style="text-align: left;vertical-align: top;width: 297.109px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    Schreibzugriff: SMC-B (C.HCI.AUT)
    <br/>
    Lesezugriff: Matrix-OpenID-Token
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_223">
</p>
<p id="polarion_85">
 <span id="polarion-comment:9">
 </span>
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-119286">
 4.2.1 Smartcard-IDP-Dienst
</h4>
<p id="polarion_168">
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:201">
  </span>
  <span id="polarion-comment:192">
  </span>
  <span id="polarion-comment:212">
  </span>
 </span>
 <span id="polarion-comment:214">
 </span>
 Der TI-Messenger-Dienst MUSS die Verifikation von Nutzern mittels SMC-B und HBA unterstützen. Ein TI-Messenger-Client oder Frontend eines Registrieungs-Dienstes MUSS am Smartcard IDP-Dienst der gematik gemäß [gemSpec_IDP_FD] registriert sein.
</p>
<p id="polarion_77">
 Im Rahmen der Registrierung werden notwendige Claims (bestätigte Identifikationsmerkmale durch den Nutzer), auf den damit zu nutzenden Dienst festgelegt. Sowohl der TI-Messenger-Client, der Matrix-Homeserver der Messenger-Services als auch der VZD-FHIR-Directory MÜSSEN den ausgestellten Security Tokens (ID_TOKEN, ACCESS_TOKEN) des Smartcard IDP-Dienst vertrauen. Der Anbieter des TI-Messenger-Fachdienstes MUSS über einen organisatorischen Prozess beim Smartcard IDP-Dienst folgende Claims im ACCESS_TOKEN vereinbaren:
</p>
<p id="polarion_34">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_36" style="text-align: left;">
 Tabelle
 <span class="polarion-rte-caption" data-sequence="Tabelle">
  #
 </span>
 : Inhalte der Claims für SMC-B/HBA
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=7" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 266.75px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Leistungserbringerinstitutionen (SMC-B)
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 313.438px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Inhalte der Claims für Leistungserbringer (HBA)
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 266.75px;height: 146px;border: 1px solid #CCCCCC;padding: 5px;">
    <ul>
     <li>
      ProfessionOID
     </li>
     <li>
      idNummer
     </li>
     <li>
      organizationName
     </li>
     <li>
      acr
     </li>
     <li>
      aud
     </li>
    </ul>
   </td>
   <td style="text-align: left;vertical-align: top;width: 313.438px;height: 146px;border: 1px solid #CCCCCC;padding: 5px;">
    <ul>
     <li>
      ProfessionOID
     </li>
     <li>
      idNummer
     </li>
     <li>
      given_name
     </li>
     <li>
      family_name
     </li>
     <li>
      acr
     </li>
     <li>
      aud
     </li>
    </ul>
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_43">
</p>
<p id="polarion_202">
 Die ProfessionOID gibt an um welche Art von Leistungserbringer (z. B. Arzt, Zahnarzt etc.) es sich handelt. Die idNummer beinhaltet die Telematik-ID für Organisationen des Gesundheitswesens und Leistungserbringer.
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:215">
  </span>
  <span id="polarion-comment:168">
  </span>
 </span>
</p>
<p id="polarion_208">
 Der Anbieter des TI-Messenger-Fachdienstes MUSS über einen organisatorischen Prozess beim Smartcard IDP-Dienst für die Autorisierungsanfrage folgende
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  scope
 </span>
 -Parameter vereinbaren:
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  scope=openid,VZD-FHIR-Directory
 </span>
</p>
<p id="polarion_79">
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-119285">
 4.2.2 Verwaltung der Nutzersession
</h4>
<p id="polarion_169">
 Die Verwaltung der Nutzersession MUSS wie in der in der Matrix-Spezifikation beschrieben erfolgen.
 <span id="polarion-comment:252">
 </span>
 <br/>
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118979">
 4.3 DNS-Namensauflösung
</h3>
<p id="polarion_32">
 Für die Namensauflösung der vom TI-Messenger-Fachdienst angebotenen Außenschnittstellen, werden DNS-Server im Internet verwendet. Der vereinbarte Abfrage-Record MUSS durch den jeweiligen TI-Messenger-Anbieter bereitgestellt werden und MUSS in öffentlichen DNS-Servern eingetragen sein.
</p>
<p id="polarion_42">
 Wird bei der Nutzung eines Messenger-Service für eine Organisation eine auf die Domain der Organisation bezogene Benamung gewählt, erfolgt die Eintragung der notwendigen DNS-Records auf DNS-Server im Internet durch die Administration der Organisation.
</p>
<p id="polarion_115">
</p>
<p id="polarion_86">
 <span id="polarion-comment:107">
 </span>
</p>
<p id="polarion_71">
 <span style="font-weight: bold;">
  Identifizierung von Messenger-Services
 </span>
</p>
<p id="polarion_72">
 <span style="font-weight: normal;">
  Jeder Messenger-Service wird durch einen Matrix-Homeservernamen identifiziert, der aus einem Hostname und einem optionalen Port besteht. Weitere Informationen finden sich in [Federation API#3].
 </span>
</p>
<p id="polarion_76">
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-119240">
 4.4 Test
</h3>
<p class="MsoNormal" id="polarion_87">
 <span id="polarion-comment:237">
 </span>
 <span id="polarion-comment:239">
 </span>
 Produkttests zur Sicherstellung der Konformität mit der Spezifikation sind vollständig in der Verantwortung der Anbieter/Hersteller des TI-Messenger-Fachdienstes. Die gematik konzentriert sich bei der Zulassung auf das Zusammenspiel der Produkte durch E2E- und IOP-Tests.
</p>
<p class="MsoNormal" id="polarion_88">
 Die eigenverantwortlichen Produkttests bei den Industriepartnern umfassen:
</p>
<ul id="polarion_112">
 <li>
  Testumgebung entwickeln,
 </li>
 <li>
  Testfallkatalog erstellen (für eigene Produkttests) und
  <br/>
 </li>
 <li>
  Produkttest durchführen und dokumentieren
 </li>
</ul>
<p class="MsoNormal" id="polarion_113">
 Die Hersteller der TI-Messenger-Fachdienste MÜSSEN zusichern, dass die gematik die Produkttests der Industriepartner in Form von Reviews der Testkonzepte, Testspezifikationen, Testfälle sowie mit dem Review der Testprotokolle (Log- und Trace-Daten) überprüfen kann.
</p>
<p class="MsoNormal" id="polarion_116">
 Die gematik fördert eine enge Zusammenarbeit und unterstützt Industriepartner dabei, die Qualität der Produkte zu verbessern. Dies erfolgt durch die Organisation früher IOP-Tests, die Synchronisierung von Meilensteinen und regelmäßige industriepartnerübergreifenden Test-Sessions. Die Test-Sessions umfassen gegenseitige IOP- und E2E Tests.
</p>
<p id="polarion_122">
 Die gematik stellt eine TI-Messenger-Fachdienst Referenzimplementierung zur Verfügung. Zur Sicherstellung der Interoperabilität zwischen verschiedenen TI-Messenger-Fachdiensten innerhalb des TI-Messenger-Dienstes MUSS der TI-Messenger-Fachdienst eines TI-Messenger-Anbieters gegen die Referenzimplementierung (TI-Messenger-Client und TI-Messenger Fachdienst) getestet werden.
 <br/>
</p>
<p id="polarion_127">
 <span style="background-color: #FFFF99;">
  <span id="polarion-comment:139">
  </span>
  <span id="polarion-comment:138">
  </span>
 </span>
</p>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-124200|layout=3">
 <a name="ML-124200">
 </a>
 <dl>
  <dt>
   ML-124200 - Test des TI-Messenger-Fachdienstes gegen die Referenzimplementierung
  </dt>
  <dd>
   Der Anbieter des TI-Messenger-Fachdienstes MUSS den Fachdienst gegen die Referenzimplementierung erfolgreich testen. Die Testergebnisse sind der gematik vorzulegen.
   <br/>
  </dd>
 </dl>
</div>
<p id="polarion_98">
 Die gematik testet in den Zulassungsverfahren auf Basis von Anwendungsfällen. Dabei werden die Anwendungsfälle durchgespielt und es wird versucht viele Funktionsbereiche und Teile der Anwendung mit einzubeziehen. Anschließend wird mit den IOP Tests die Interoperabilität zwischen den verschiedenen Anbieter nachgewiesen. Für das Zulassungsverfahren des TI-Messenger-Dienstes MÜSSEN die TI-Messenger-Clients und TI-Messenger-Fachdienste bereitgestellt werden. Um einen automatisierten Test für den TI-Messenger-Dienst zu ermöglichen, MUSS die Test-App des TI-Messenger-Clients zusätzlich ein Testtreiber-Modul beinhalten, welcher die Funktionalitäten der produktspezifischen Schnittstelle des TI-Messenger-Clients über eine standardisierte Schnittstelle von außen zugänglich macht und einen Fernzugriff ermöglicht.
 <br/>
 <span id="polarion-comment:158">
 </span>
</p>
<p id="polarion_129">
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-119241">
 4.5 Betrieb
</h3>
<p id="polarion_184">
 Der Betrieb des Fachdienstes wird durch den TI-Messenger-Anbieter verantwortet. Entsprechend dem Betriebskonzept [gemKPT_Betr#Anbieterkonstellationen], KANN
 <span id="polarion-comment:124">
 </span>
 der Betrieb jedoch aus- bzw. verlagert werden. Zum Beispiel für ein on-premise Hosting. Die Koordination der jeweiligen Komponenten sowie die Erfüllung der Anforderungen verbleiben jedoch am Anbieter. Dieser KANN in Abstimmung mit seinen Nutzern und Dienstleistern Verträge abschließen um den sicheren Betrieb aufrecht zu erhalten.
 <span id="polarion-comment:225">
 </span>
 <span id="polarion-comment:183">
 </span>
</p>
<p id="polarion_123">
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-119142">
 4.5.1 Performance
</h4>
<p id="polarion_126">
 Der TI-Messenger Fachdienst MUSS mit einer vollumfänglich-funktionalen Verfügbarkeit von 98% betreibbar sein.
</p>
<p id="polarion_130">
 Der Anbieter TI-Messenger MUSS sein Produkt TI-Messenger-Fachdienst mit einer vollumfänglich-funktionalen Verfügbarkeit von 98% betreiben.
 <span id="polarion-comment:185">
 </span>
 <span id="polarion-comment:179">
 </span>
</p>
<p id="polarion_134">
 Wenn der Betrieb von Homeservern on-premise
 <span id="polarion-comment:84">
 </span>
 bei den Nutzern realisiert wird, KANN der Anbieter TI-Messenger für diese Produktinstanzen von den Performancevorgaben in Abstimmung mit seinen Nutzern abweichen. Die Abweichungen und die betroffenen Instanzen MÜSSEN der gematik im Rahmen der betrieblichen Prozesse bekannt gemacht werden.
</p>
<p id="polarion_144">
 <span id="polarion-comment:181">
 </span>
 <span id="polarion-comment:32">
 </span>
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-123749">
 4.5.2 Monitoring
</h4>
<p id="polarion_139">
 Die folgenden technischen Kommunikationsbeziehungen bzw. Use Cases MÜSSEN im Rahmen des Monitorings und der Rohdatenerfassung am TI-Messenger-Fachdienst erfasst und automatisiert und anonymisiert an die gematik zur Performancebewertung der Vorgaben zum Rohdatenreporting [gemSpec_Perf#Performance-Evaluierung auf der Basis von Rohdaten] reportet werden.
 <span id="polarion-comment:186">
 </span>
</p>
<p id="polarion_142">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_132" style="text-align: left;">
 Tabelle
 <span class="polarion-rte-caption" data-sequence="Tabelle">
  #
 </span>
 : Technische Kommunikationsbeziehungen – Use-Case-Mapping
 <span id="polarion-comment:250">
 </span>
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=8" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 86px;height: 95px;border: 1px solid #CCCCCC;padding: 5px;">
    Use-Case-Referenz
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 170px;height: 95px;border: 1px solid #CCCCCC;padding: 5px;">
    Use-Case-Titel
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 325px;height: 95px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix-Operation bzw. Use-Case-Mapping  auf TI-Messenger Fachdienst-Komponente(n)
    <span id="polarion-comment:99">
    </span>
    <br/>
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 325px;height: 95px;border: 1px solid #CCCCCC;padding: 5px;">
    Start und Ende der Messung am TI-Messenger-Fachdienst
    <br/>
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10057
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    Anmeldung eines Nutzers am Messenger-Service
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    Messenger-Service
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    Start:
    <br/>
    Messenger Service erhält Login Request durch Client
    <br/>
    <br/>
    Ende:
    <br/>
    Übermittlung Matrix-OpenID-Token
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10060
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    Messenger-Service bereitstellen
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    Registrierungs-Dienst, Messenger-Service
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">
    Start:
    <br/>
    AuthZ, Erstelle Messaging-Service
    <br/>
    <br/>
    Ende:
    <br/>
    Account Daten wurden übermittelt
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10061
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    TI-Messenger Remote Invite
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    Homeserver A, Messenger-Proxy A,
    <br/>
    Homeserver B, Messenger-Proxy B
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    Start Provider A:
    <br/>
    Eingang Request von Client A: Invite User B + PASSporT
    <br/>
    <br/>
    Ende:
    <br/>
    Ausgang Request an Provider B: Invite User B + PASSporT
    <br/>
    <br/>
    Start Provider B:
    <br/>
    Eingang Request von Provider A: Invite User B + PASSporT
    <br/>
    <br/>
    Ende:
    <br/>
    Versand Invite Request an Client B
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10062
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    Message senden (Remote)
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    Homeserver A, Messenger-Proxy A,
    <br/>
    Homeserver B, Messenger-Proxy B
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    Start Provider A:
    <br/>
    Eingang Request von Client A
    <br/>
    <br/>
    Ende:
    <br/>
    Ausgang Request an Provider B
    <br/>
    <br/>
    Start Provider B:
    <br/>
    Eingang Request von Provider A
    <br/>
    <br/>
    Ende:
    <br/>
    Ausgang Request an Client B
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 61px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10063
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 61px;border: 1px solid #CCCCCC;padding: 5px;">
    Client-Fachdienst-Nachrichtenversand
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 61px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix CS API spec 8.6 "
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     PUT
    </span>
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     /_matrix/client/r0/rooms/{roomId}/state/
    </span>
    <br/>
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     {eventType}/{stateKey}
    </span>
    "
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 61px;border: 1px solid #CCCCCC;padding: 5px;">
    Start:
    <br/>
    Eingang Request am Homeserver vom Client.
    <br/>
    <br/>
    Ende:
    <br/>
    Response an Client, dass die Nachricht erfolgreich erhalten wurde.
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 62px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10063
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 62px;border: 1px solid #CCCCCC;padding: 5px;">
    Client-Fachdienst-Nachrichtenempfang
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 62px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix CS API spec 8.5 "
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     PUT
    </span>
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     /_matrix/client/r0/rooms/{roomId}/state/
     <br/>
     {eventType}/{stateKey}
    </span>
    "
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 62px;border: 1px solid #CCCCCC;padding: 5px;">
    Start:
    <br/>
    Beginn des Nachrichtenabrufs durch Client
    <br/>
    <br/>
    Ende:
    <br/>
    (erfolgreiche) Übermittlung der Nachricht an Client
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 65px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10062
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 65px;border: 1px solid #CCCCCC;padding: 5px;">
    Fachdienst-Fachdienst-versendete PDUs
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 65px;border: 1px solid #CCCCCC;padding: 5px;">
    siehe Matrix Server-Server-API 4,
    <br/>
    vgl. synapse Metrik: `
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     synapse_federation_client
     <br/>
     _sent_pdu_destinations:total
    </span>
    `
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 65px;border: 1px solid #CCCCCC;padding: 5px;">
    Start:
    <br/>
    Request an Empfangsserver
    <br/>
    <br/>
    Ende:
    <br/>
    (erfolgreiche) Übermittlung der Nachricht an Empfangsserver
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 86px;height: 64px;border: 1px solid #CCCCCC;padding: 5px;">
    AF_10062
   </td>
   <td style="text-align: left;vertical-align: top;width: 170px;height: 64px;border: 1px solid #CCCCCC;padding: 5px;">
    Fachdienst-Fachdienst-empfangene PDUs
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 64px;border: 1px solid #CCCCCC;padding: 5px;">
    siehe Matrix Server-Server-API 5.1,
    <br/>
    vgl. synapse Metrik: `
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     synapse_federation_server
     <br/>
     _received_pdus
    </span>
    `
   </td>
   <td style="text-align: left;vertical-align: top;width: 325px;height: 64px;border: 1px solid #CCCCCC;padding: 5px;">
    Start:
    <br/>
    Eingang des Requests am Empfangsserver
    <br/>
    <br/>
    Ende:
    <br/>
    (erfolgreiche) Übermittlung der Nachricht am Empfangsserver
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_148">
</p>
<p id="polarion_219">
 <span style="font-weight: bold;">
  Bestandsdaten
 </span>
 <br/>
 Der TI-Messenger Fachdienst MUSS die nachfolgenden Informationen jeweils monatlich zum 01. des Monats in folgendem JSON Format als HTTP Body an die Betriebsdatenerfassung (BDE) gemäß gemSpec_SST_LD_BD liefern:
 <br/>
 {
 <br/>
 „Abfragezeitpunkt“: &lt;Zeitstempel der Abfrage als String im ISO 8601 Format&gt;,
 <br/>
 „CI_ID“: &lt;CI ID des abgefragten Fachdienstes gemäß TI-ITSM als String&gt;,
 <br/>
 „TIM-FD_Anzahl_Homeserver“: &lt;Anzahl der zum Abfragezeitpunkt instanziierten Homeserver&gt;,
 <br/>
 „TIM-FD_Anzahl_Organisationen“: &lt;Anzahl der zum Abfragezeitpunkt registrierten Organisationen&gt;
 <br/>
 „TIM-FD_Anzahl_Nutzer“: &lt;Anzahl der zum Abfragezeitpunkt registrierten Nutzer&gt;,
 <br/>
 „TIM-FD_Anzahl_aktNutzer“: &lt;Anzahl der zum Abfragezeitpunkt innerhalb des letzten Monats aktiven Nutzer&gt;
 <br/>
 }
 <br/>
 <br/>
 Da bei dieser Lieferung keine Datei übermittelt wird, sondern der Text direkt im Body, ist für diese Lieferung die Angabe des filenames im HTTP Header gemäß [A_17112] (Tab_I_LogData_002 Operation I_LogData::fileUpload) in der gemSpec_SST_LD_BD NICHT notwendig.
 <span id="polarion-comment:260">
 </span>
 <br/>
</p>
<p id="polarion_154">
 <span id="polarion-comment:187">
 </span>
</p>
<p id="polarion_161">
 <span style="font-weight: bold;">
  Service Monitoring
 </span>
 <br/>
 <br/>
 Der TI-Messenger Anbieter MUSS das Service Monitoring der gematik technisch-organisatorisch unterstützen.
 <br/>
 <br/>
 Dafür kann es z.B. notwendig sein, dass entsprechende Accounts auf Homeservern eingerichtet werden. Das Service Monitoring SOLL dabei zu keinen technischen Veränderungen an den Produkten führen.
</p>
<p id="polarion_163">
 <span id="polarion-comment:188">
 </span>
</p>
<h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118372">
 5 Funktionsmerkmale
</h2>
<p id="polarion_108">
 Im folgenden Kapitel wird der TI-Messenger-Fachdienst bezogen auf seine Teilkomponenten funktional beschrieben. Der TI-Messenger-Fachdienst ist die Kernkomponente des TI-Messenger-Dienstes. Dieser stellt alle Schnittstellen bereit, die für die Kommunikation innerhalb des TI-Messenger-Dienstes benötigt werden.
</p>
<p id="polarion_30">
 In der folgenden Abbildung ist der TI-Messenger-Fachdienst mit seinen Funktionsmerkmalen als Whitebox dargestellt:
 <br/>
</p>
<p id="polarion_124" style="text-align: center;">
 <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWBAMAAACWdajhAAAAG1BMVEV//9QAAABv37kPHxo/f2ovX09Pn4Rfv58fPzUApD1aAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACZklEQVR4nO2WQW/TQBCFF8dNOHa7tevjBoi4xoVWHGP10mNopZ6dnDgG+AM1SPC3mfGu7Vlhh4SmIkjvk9pmZ948P3lXmyoFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8x0Rm/07LdH7QLFsf/vm0t9OUJTvF6ht8eqzm0X8ViwXh4I4v+I+buM1np1h7jhxRrOn8xiyVmtybO1rN8qyMTJxfBU0e7DpjrfXc+00v780irjKruPe+kV7xekbrW/1N+YLzqoeFaFyljV0Y653WiVIrrY1VE5Kkkcm1Xsom2YhOEIs+Zzmv695jI71QEf3W38lV+YLzamJ5kan0QCyzHmsb6btJRU9J7Nsfkb62qzPRrJ8vOs1b57JZxzqxX1OKcf1qlXLtdWJnGa9tQa556QudlxSldmATL5X6WMb0TkYXqnhUfIKsOklFkwdlR8YiQb5R8Xl97uKsltKbrixryVEVC1/ovELR0Nni0ZdkQN7VRrmDTZ+7Jv+RHRmLPlJrnNQ9+mEpPaooec2uq6UvdF6haFusEW0aeed2KJbsDMZSupbyqVqIWK4QxupEzx8rOnSsw2ziJGv2x2nFJkqvULQtFh1WceR7YsnOi9OBWCd1ZBoIY7mC9+LhQNTa9cQSF8RDbyzZGZ33xlpHxZmTfok+bUQsV/BePByIWrueWP46HbtLsyeW7MTiOu1i8WEpm+tUy1iu4L3i7jp1otauL1b75fOh7I0VdOpvpN/e1o3+6Sbe5OZBbqIreC8eDkSt3bOww7+I/wLE2ocjjQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAx8Yv0dGgYPUMKHsAAAAASUVORK5CYII=" style="width: 499px;height: 493px;"/>
</p>
<p class="polarion-rte-caption-paragraph" id="polarion_56" style="text-align: center;">
 <span id="polarion-comment:223">
 </span>
 Abbildung
 <span class="polarion-rte-caption" data-sequence="Abbildung">
  #
 </span>
 : Funktionaler Aufbau des TI-Messenger-Fachdienstes
</p>
<p id="polarion_64">
</p>
<p id="polarion_57">
 Die in der Abbildung grün dargestellten Boxen zeigen die Schnittstellen, die am TI-Messenger-Fachdienst aufgerufen werden. Rot dargestellte Boxen zeigen die Schnittstellen, über die der Fachdienst weitere Services anderer Komponenten nutzt. Eine Ausnahme bildet die Kommunikation zwischen den TI-Messenger-Fachdiensten. Hier wird die Kommunikation bilateral zwischen den zur Föderation gehörenden Fachdiensten realisiert.
</p>
<p id="polarion_93">
</p>
<p id="polarion_91">
 <span id="polarion-comment:33">
 </span>
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122242">
 5.1 Umsetzung der Matrix-API
</h3>
<p id="polarion_82">
 Im folgenden Abschnitt wird für die zum TI-Messenger-Fachdienst gehörenden Komponenten, die Nutzung der von der Matrix-Foundation beschriebenen APIs
 <span id="polarion-comment:63">
 </span>
 dargestellt. Die jeweilige API MUSS vollständig und als RESTful API gemäß
</p>
<ul id="polarion_28">
 <li>
  [Matrix Foundation#Server_Server],
 </li>
 <li>
  [Matrix Foundation#Client_Server],
 </li>
 <li>
  [Matrix Foundation#Push_Gateway]
 </li>
</ul>
<p id="polarion_50">
 umgesetzt werden.
</p>
<p id="polarion_95">
 Die Abbildung "
 <span style="font-style: italic;">
  Matrix-API des Messenger Service
 </span>
 " zeigt die jeweils zu berücksichtigenden Schnittstellen bei den bereitzustellenden Komponenten (Server-Server API , Client-Server API, Push Gateway API) an.
</p>
<p id="polarion_92">
</p>
<p class="polarion-rte-caption-paragraph" id="polarion_151" style="text-align: center;">
 <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWBAMAAACWdajhAAAAG1BMVEV//9QAAABv37kPHxo/f2ovX09Pn4Rfv58fPzUApD1aAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACZklEQVR4nO2WQW/TQBCFF8dNOHa7tevjBoi4xoVWHGP10mNopZ6dnDgG+AM1SPC3mfGu7Vlhh4SmIkjvk9pmZ948P3lXmyoFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8x0Rm/07LdH7QLFsf/vm0t9OUJTvF6ht8eqzm0X8ViwXh4I4v+I+buM1np1h7jhxRrOn8xiyVmtybO1rN8qyMTJxfBU0e7DpjrfXc+00v780irjKruPe+kV7xekbrW/1N+YLzqoeFaFyljV0Y653WiVIrrY1VE5Kkkcm1Xsom2YhOEIs+Zzmv695jI71QEf3W38lV+YLzamJ5kan0QCyzHmsb6btJRU9J7Nsfkb62qzPRrJ8vOs1b57JZxzqxX1OKcf1qlXLtdWJnGa9tQa556QudlxSldmATL5X6WMb0TkYXqnhUfIKsOklFkwdlR8YiQb5R8Xl97uKsltKbrixryVEVC1/ovELR0Nni0ZdkQN7VRrmDTZ+7Jv+RHRmLPlJrnNQ9+mEpPaooec2uq6UvdF6haFusEW0aeed2KJbsDMZSupbyqVqIWK4QxupEzx8rOnSsw2ziJGv2x2nFJkqvULQtFh1WceR7YsnOi9OBWCd1ZBoIY7mC9+LhQNTa9cQSF8RDbyzZGZ33xlpHxZmTfok+bUQsV/BePByIWrueWP46HbtLsyeW7MTiOu1i8WEpm+tUy1iu4L3i7jp1otauL1b75fOh7I0VdOpvpN/e1o3+6Sbe5OZBbqIreC8eDkSt3bOww7+I/wLE2ocjjQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAx8Yv0dGgYPUMKHsAAAAASUVORK5CYII=" style="width: 456px;height: 310px;"/>
 <span id="polarion-comment:110">
 </span>
</p>
<p class="polarion-rte-caption-paragraph" id="polarion_180" style="text-align: center;">
 Abbildung
 <span class="polarion-rte-caption" data-sequence="Abbildung">
  #
 </span>
 : Matrix-API des Messenger-Service
</p>
<p id="polarion_190">
</p>
<p id="polarion_67">
 Die Webservices der Matrix-Homeserver werden nicht direkt von den TI-Messenger-Clients aufgerufen. Der Aufruf der Client-Server-API am Matrix-Homeserver erfolgt über den Messenger-Proxy. Dieser leitet alle Aufrufe der TI-Messenger-Clients an den Matrix-Homeserver per HTTP-Forward weiter. Die Kommunikation der Matrix-Homeserver untereinander erfolgt ebenfalls über den Messenger-Proxy. Auch hier wird die Kommunikation durch Forwarding für die Matrix-Server-Server-Kommunikation zum Homeserver weitergeleitet. Zum Versenden von Push-Notifications nutzt der Matrix-Homeserver die Matrix-Push-Gateway-API des Push-Gateways.
</p>
<p id="polarion_83">
 Der Messenger-Proxy agiert neben der Funktion als Proxy zur Weiterleitung aller Server-Server-API- und Client-Server-API-Aufrufe an den Homeserver als Kontrollinstanz, um für die Kommunikation notwendigen Rechte zu prüfen. Hierfür MUSS der Messenger-Proxy für alle Server-Server- und Client-Server-API-Endpunkte genutzt werden.
 <span id="polarion-comment:109">
 </span>
 <span id="polarion-comment:35">
 </span>
</p>
<p id="polarion_105">
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122270">
 5.2 Funktionen der Systemkomponenten
</h3>
<p id="polarion_96">
 Im folgenden Kapitel werden alle für den Betrieb des TI-Messenger-Fachdienstes notwendigen Komponenten funktional beschrieben.
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-123906">
 5.2.1 Messenger-Service
</h4>
<h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122273">
 5.2.1.1 Matrix-Homeserver
</h5>
<p id="polarion_37">
 Der Matrix-Homeserver MUSS die Matrix-Spezifikation vollständig umsetzen. Bereits existierende Produkte, die der Matrix Spezifikation folgen, können als Matrix-Homeserver verwendet werden
 <span style="font-style: normal;">
  , sofern die zusätzlichen vorausgesetzten MSCs:
 </span>
</p>
<ul id="polarion_26">
 <li>
  <span style="font-style: normal;">
   <a class="descriptionLink" href="https://github.com/matrix-org/matrix-doc/pull/3013" target="_top">
    MSC3013: Encrypted Push
   </a>
   <span id="polarion-comment:96">
   </span>
  </span>
 </li>
 <li>
  <span style="font-style: normal;">
   <a class="descriptionLink" href="https://github.com/matrix-org/matrix-doc/pull/3359" target="_top">
    MSC3359: Delayed Push
   </a>
  </span>
 </li>
 <li>
  <span style="font-style: normal;">
   <a class="descriptionLink" href="https://github.com/matrix-org/matrix-doc/pull/3361" target="_top">
    Opportunistic Direct Push
   </a>
  </span>
  <span style="background-color: #FFFF99;">
   <br/>
  </span>
 </li>
</ul>
<p id="polarion_54">
 <span style="font-style: normal;">
  implementiert wurden.
 </span>
 <span style="font-style: normal;background-color: #99FF99;">
  <span id="polarion-comment:25">
  </span>
 </span>
</p>
<p id="polarion_48">
 Der Matrix-Homeserver eines Messenger-Service:
</p>
<ul id="polarion_224">
 <li>
  MUSS
  <span style="font-size: 10pt;line-height: 1.5;">
   Anfragen vom eigenen Messenger-Proxy akzeptieren,
  </span>
 </li>
 <li>
  <span style="font-size: 10pt;line-height: 1.5;">
   DARF Anfragen anderere Messenger-Proxies nicht akzeptieren.
  </span>
  <span style="font-size: 10pt;background-color: #FFFFCC;line-height: 1.5;">
   <span id="polarion-comment:204">
   </span>
  </span>
 </li>
</ul>
<p id="polarion_225">
 Die vom Matrix-Homeserver verwendeten Authentifizierungsverfahren MÜSSEN konfigurierbar sein.
 <span style="text-decoration: line-through;">
  <span id="polarion-comment:193">
  </span>
 </span>
 Beim Anmeldeversuch eines neuen TI-Messenger-Nutzers an einem Matrix-Homeserver MUSS dieser alle unterstützten Authentifizierungsverfahren zur Auswahl anbieten. Nach einer erfolgreichen Anmeldung eines TI-Messenger-Nutzers bei dem Matrix-Homeserver stellt dieser ein von ihm erstelltes Matrix-ACCESS_TOKEN sowie ein
 <span style="font-size: 10pt;line-height: 1.5;">
  Matrix-OpenID-Token
 </span>
 bereit. Das Matrix-ACCESS_TOKEN wird für jede weitere Autorisierung am Matrix-Homeserver verwendet. Das ausgestellte
 <span style="font-size: 10pt;line-height: 1.5;">
  Matrix-OpenID-Token
 </span>
 wird für eine spätere Authentisierung am FHIR-Proxy des VZD-FHIR-Directory verwendet und MUSS eine Gültigkeitsdauer von 30 Minuten aufweisen.
</p>
<p id="polarion_140">
</p>
<p id="polarion_146">
 Im Folgenden ist eine Beispielkonfiguration eines Matrix-Homeservers dargestellt:
</p>
<p id="polarion_149">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_145" style="text-align: left;">
 Beispielkonfiguration
 <span id="polarion-comment:249">
 </span>
 eines Synapse Servers
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=146" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-weight: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     acme:
     <br/>
     bind_addresses:
     <br/>
     - '::'
     <br/>
     - 0.0.0.0
     <br/>
     enabled: false
     <br/>
     port: 80
     <br/>
     reprovision_threshold: 30
     <br/>
     url: https://acme-v02.api.letsencrypt.org/directory
     <br/>
     alias_creation_rules:
     <br/>
     -   action: allow
     <br/>
     alias: '*'
     <br/>
     user_id: '*'
     <br/>
     allow_guest_access: false
     <br/>
     app_service_config_files: []
     <br/>
     autocreate_auto_join_rooms: true
     <br/>
     bcrypt_rounds: 12
     <br/>
     database:
     <br/>
     args:
     <br/>
     cp_max: 10
     <br/>
     cp_min: 5
     <br/>
     database: synapse
     <br/>
     host: /var/run/postgresql
     <br/>
     password: min_32_recommended
     <br/>
     user: synapse
     <br/>
     name: psycopg2
     <br/>
     dynamic_thumbnails: false
     <br/>
     enable_group_creation: true
     <br/>
     enable_metrics: true
     <br/>
     enable_registration: false
     <br/>
     event_cache_size: 10K
     <br/>
     expire_access_token: false
     <br/>
     federation_rc_concurrent: 3
     <br/>
     federation_rc_reject_limit: 50
     <br/>
     federation_rc_sleep_delay: 500
     <br/>
     federation_rc_sleep_limit: 10
     <br/>
     federation_rc_window_size: 1000
     <br/>
     form_secret: min_32_alphanumeric_recommended
     <br/>
     key_refresh_interval: 1d
     <br/>
     listeners:
     <br/>
     -   bind_addresses:
     <br/>
     - '::'
     <br/>
     - 0.0.0.0
     <br/>
     port: 8008
     <br/>
     resources:
     <br/>
     -   compress: true
     <br/>
     names:
     <br/>
     - client
     <br/>
     -   compress: false
     <br/>
     names:
     <br/>
     - federation
     <br/>
     type: http
     <br/>
     x_forwarded: true
     <br/>
     -   bind_addresses:
     <br/>
     - 0.0.0.0
     <br/>
     port: 9001
     <br/>
     type: metrics
     <br/>
     log_config: /opt/synapse/log.config
     <br/>
     macaroon_secret_key: min_32_alphanumeric_recommended
     <br/>
     max_image_pixels: 32M
     <br/>
     max_spider_size: 10M
     <br/>
     max_upload_size: 23M
     <br/>
     media_store_path: /opt/synapse/media_store
     <br/>
     no_tls: true
     <br/>
     old_signing_keys: {}
     <br/>
     password_config:
     <br/>
     enabled: true
     <br/>
     password_providers:
     <br/>
     -   config:
     <br/>
     algorithm: HS512
     <br/>
     allow_registration: true
     <br/>
     require_expiracy: true
     <br/>
     secret: min_32_alphanumeric_recommended
     <br/>
     module: token_authenticator.TokenAuthenticator
     <br/>
     perspectives:
     <br/>
     servers:
     <br/>
     matrix.org:
     <br/>
     verify_keys:
     <br/>
     ed25519:auto:
     <br/>
     key: Noi6WqcDj0QmPxCNQqgezwTlBKrfqehY1u2FyWP9uYw
     <br/>
     pid_file: /opt/synapse/synapse.pid
     <br/>
     public_baseurl: https://matrix-client.meine-arztpraxis.hausaerzte-berlin.de
     <br/>
     push:
     <br/>
     include_content: false
     <br/>
     rc_login:
     <br/>
     account:
     <br/>
     burst_count: 10
     <br/>
     per_second: 1
     <br/>
     address:
     <br/>
     burst_count: 100
     <br/>
     per_second: 10
     <br/>
     rc_message_burst_count: 10.0
     <br/>
     rc_messages_per_second: 0.2
     <br/>
     # optional, for using synapse workers
     <br/>
     redis:
     <br/>
     enabled: false
     <br/>
     host: redis_host
     <br/>
     password: min_128_alphanumeric_recommended
     <br/>
     port: 6379
     <br/>
     registration_shared_secret: min_32_alphanumeric_recommended
     <br/>
     report_stats: true
     <br/>
     report_stats_endpoint: https://synapse-stats.gematik.de/push
     <br/>
     room_prejoin_state:
     <br/>
     additional_event_types:
     <br/>
     - m.room.type
     <br/>
     - de.gematik.ti-messenger.passport
     <br/>
     disable_default_event_types: false
     <br/>
     server_name: meine-arztpraxis.hausaerzte-berlin.de
     <br/>
     signing_key_path: /opt/synapse/tls/meine-arztpraxis.hausaerzte-berlin.de.signing.key
     <br/>
     soft_file_limit: 0
     <br/>
     thumbnail_sizes:
     <br/>
     -   height: 32
     <br/>
     method: crop
     <br/>
     width: 32
     <br/>
     -   height: 96
     <br/>
     method: crop
     <br/>
     width: 96
     <br/>
     -   height: 240
     <br/>
     method: scale
     <br/>
     width: 320
     <br/>
     -   height: 480
     <br/>
     method: scale
     <br/>
     width: 640
     <br/>
     -   height: 600
     <br/>
     method: scale
     <br/>
     width: 800
     <br/>
     tls_certificate_path: /opt/synapse/tls/meine-arztpraxis.hausaerzte-berlin.de.crt
     <br/>
     tls_fingerprints: []
     <br/>
     tls_private_key_path: /opt/synapse/tls/meine-arztpraxis.hausaerzte-berlin.de.key
     <br/>
     track_appservice_user_ips: false
     <br/>
     trusted_third_party_id_servers: []
     <br/>
     turn_allow_guests: true
     <br/>
     turn_shared_secret: min_64_recommended
     <br/>
     turn_uris:
     <br/>
     - turns:matrix-voip.tim-provider.de:3478?transport=udp
     <br/>
     - turns:matrix-voip.tim-provider.de:3478?transport=tcp
     <br/>
     turn_user_lifetime: 2h
     <br/>
     uploads_path: /opt/synapse/uploads
     <br/>
     url_preview_enabled: true
     <br/>
     url_preview_ip_range_blacklist:
     <br/>
     - 127.0.0.0/8
     <br/>
     - 10.0.0.0/8
     <br/>
     - 172.16.0.0/12
     <br/>
     - 192.168.0.0/16
     <br/>
     - 100.64.0.0/10
     <br/>
     - 169.254.0.0/16
     <br/>
     - ::1/128
     <br/>
     - fe80::/64
     <br/>
     - fc00::/7
     <br/>
     url_preview_url_blacklist:
     <br/>
     -   username: '*'
     <br/>
     -   netloc: google.com
     <br/>
     -   netloc: '*.google.com'
     <br/>
     -   netloc: twitter.com
     <br/>
     -   netloc: '*.twitter.com'
     <br/>
     -   netloc: t.co
     <br/>
     -   netloc: '*.t.co'
     <br/>
     use_presence: true
    </span>
   </th>
  </tr>
 </tbody>
</table>
<p id="polarion_147">
</p>
<p id="polarion_69">
 <span id="polarion-comment:10">
 </span>
</p>
<p id="polarion_94">
 <span id="polarion-comment:44">
 </span>
</p>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123905|layout=3">
 <a name="ML-123905">
 </a>
 <dl>
  <dt>
   ML-123905 - Umsetzung von BSI-Vorgaben für Server (Produkt)
  </dt>
  <dd>
   Der TI-Messenger-Fachdienst SOLL den Vorgaben von [BSI-ISI-Server] folgen.
   <br/>
   <span id="polarion-comment:111">
   </span>
  </dd>
 </dl>
</div>
<div id="polarion_wiki macro name=module-workitem;params=id=ML-123956|layout=3">
 <a name="ML-123956">
 </a>
 <dl>
  <dt>
   ML-123956 - Umsetzung von BSI-Vorgaben für Server (Anbieter)
  </dt>
  <dd>
   Der TI-Messenger-Anbieter SOLL den Vorgaben von [BSI-ISI-Server] folgen.
   <span style="background-color: #FFFF99;">
    <span id="polarion-comment:248">
    </span>
   </span>
   <br/>
  </dd>
 </dl>
</div>
<p id="polarion_41">
</p>
<h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122268">
 5.2.1.2 Messenger-Proxy
</h5>
<p id="polarion_110">
 Der Messenger-Proxy ist eine Kernkomponente der dezentralen Messenger-Services. Alle Anfragen der TI-Messenger-Clients und anderen Messenger-Services zum Matrix-Homeserver MÜSSEN über den Messenger-Proxy geleitet werden. Die TLS-Kommunikation zwischen den TI-Messenger-Clients und den Matrix-Homeserver MUSS am Messenger-Proxy terminiert werden. Die Absicherung der TLS-Kommunikation MUSS durch eine einseitige Serverauthentisierung unter Nutzung eines X.509-Zertifikats erfolgen.
</p>
<p id="polarion_117">
 <span style="text-decoration: line-through;background-color: #FFFF99;">
  <span id="polarion-comment:238">
  </span>
 </span>
 <span id="polarion-comment:113">
 </span>
</p>
<p id="polarion_51">
 Die Kommunkation zwischen TI-Messenger-Client und Matrix-Homeserver erfolgt immer über den Messenger-Proxy (Forwarding).
 <span id="polarion-comment:202">
 </span>
 Der Messenger-Proxy MUSS sowohl als
 <span style="font-size: 10pt;line-height: 1.5;">
  Reverse Proxy als auch als Forward Proxy fungieren. Alle eingehenden Kommunikationen MUSS der Messenger-Proxy an den Matrix-Homeserver weiterleiten. Eine Kommunikation vom Matrix-Homeserver zum TI-Messenger-Client und auch zu einem anderen Matrix-Homeserver bei einem anderen Messenger-Service MUSS über den Messenger-Proxy weitergeleitet werden.
 </span>
</p>
<p id="polarion_106">
 <span style="font-size: 10pt;line-height: 1.5;">
  Für alle Server-to-Server Anfragen (Anfragen, deren Pfad unter
  <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
   /_matrix/federation
  </span>
  liegt) MUSS beim anfragenden Matrix-Homeserver im Messenger-Proxy geprüft werden, ob der Zielhomeserver der Anfrage Teil der Föderation ist. Hierfür MUSS MSC3383 (
  <a class="descriptionLink" href="https://github.com/matrix-org/matrix-doc/pull/3383" target="_top">
   https://github.com/matrix-org/matrix-doc/pull/3383
  </a>
  ) implementiert und das
  <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
   destination
  </span>
  -Feld im
  <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
   Authorization
  </span>
  -Header des HTTP Requests geprüft werden.
  <span id="polarion-comment:145">
  </span>
  Wenn der Server an der Föderation teilnimmt, darf der Request abgesendet werden, wobei eine Authentisierung des Zielhomeservers gemäß [Federation API#4.2] beschrieben mittels TLS Zertifikat durchgeführt werden muss. Für eingehende Server-to-Server Anfragen MUSS der Messenger-Proxy eine Authentisierung gemäß [Federation API#4.1] beschrieben durchführen. Sobald der Homeserver damit authentisiert wurde, MUSS validiert werden, dass der Homeserver an der Föderation teilnimmt.
 </span>
</p>
<p id="polarion_31">
 <span style="font-size: 10pt;line-height: 1.5;">
  <br/>
  Die Prüfung, ob ein Matrix-Homeserver an der Föderation teilnimmt, basiert auf der Domain. Eine Liste an aktuell verifizierten und zugelassenen Domains kann vom VZD-FHIR-Directory über den Registrierungs-Dienst angefragt werden. Wie die Domains vom Registrierungs-Dienst an die Messenger-Proxies verteilt werden ist nicht konkreter spezifiziert.
 </span>
 <span style="font-size: 10pt;background-color: #FFFF33;line-height: 1.5;">
  <span id="polarion-comment:144">
  </span>
 </span>
</p>
<p id="polarion_175">
 Beim Aufruf von 2 RESTful-Endpunkten auf den Matrix-Homeservern über den Messenger-Proxy prüft dieser Inhalte wie folgt:
</p>
<p id="polarion_205">
</p>
<p id="polarion_46">
 <span style="font-weight: bold;">
  Invite-Endpunkt (Punkt 12 Server-Server API)
 </span>
</p>
<p id="polarion_47">
 Der Messenger-Proxy MUSS Prüfregeln
 <span id="polarion-comment:65">
 </span>
 unterstützen. Hierfür agiert der Messenger-Proxy als eine Prüfinstanz, wie folgend beschrieben. Handelt es sich bei der Anfrage um ein
 <span style="font-style: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  Invite-Event
 </span>
 <span style="font-style: italic;">
 </span>
 <span style="font-style: normal;">
  MUSS der Messenger-Proxy folgende Prüfregeln anwenden:
 </span>
</p>
<p id="polarion_63">
 <span style="font-style: normal;text-decoration: line-through;">
  <span id="polarion-comment:143">
  </span>
 </span>
</p>
<p id="polarion_65">
 <span style="background-color: #FFFFCC;">
 </span>
</p>
<ul id="polarion_81">
 <li>
  Der Messenger-Proxy MUSS prüfen, ob ein PASSporT vorhanden, gültig ist und auch für den einladenden Nutzer
  <span id="polarion-comment:36">
  </span>
  ausgestellt wurde. Das Zertifikat zur Prüfung des PASSporT erhält der Messenger-Proxy vom Registrierungs-Dienst. Der Registrierungs-Dienst ruft die Zertifikate vom VZD-FHIR-Directory ab.
 </li>
</ul>
<p id="polarion_153">
 Die Kommunikation zum Registrierungs-Dienst MUSS durch TLS abgesichert werden.
</p>
<p id="polarion_156">
</p>
<p id="polarion_167">
 Im Folgenden wird ein Beispiel für einen
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  Invite-Event
 </span>
 gezeigt.
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=uid=1" style="width: 80%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-weight: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     {
     <br/>
     "content": {
     <br/>
     "avatar_url": "mxc://example.org/SEsfnsuifSDFSSEF",
     <br/>
     "displayname": "Alice Margatroid",
     <br/>
     "membership": "invite"
     <br/>
     },
     <br/>
     "event_id": "$143273582443PhrSn:example.org",
     <br/>
     "origin_server_ts": 1432735824653,
     <br/>
     "room_id": "!jEsUZKDJdhlrceRyVU:example.org",
     <br/>
     "sender": "@orig:example.org",
     <br/>
     "state_key": "@dest:example.org",
     <br/>
     "type": "m.room.member",
     <br/>
     "unsigned": {
     <br/>
     "age": 1234,
     <br/>
     "invite_room_state": [
     <br/>
     {
     <br/>
     "content": {
     <br/>
     "token": "&lt;PASSporT&gt;"
     <br/>
     },
     <br/>
     "sender": "@orig:example.org",
     <br/>
     "state_key": "@dest:example.org",
     <br/>
     "type": "de.gematik.ti-messenger.passport"
     <br/>
     },
     <br/>
     {
     <br/>
     "content": {
     <br/>
     "join_rule": "invite"
     <br/>
     },
     <br/>
     "sender": "@orig:example.org",
     <br/>
     "state_key": "",
     <br/>
     "type": "m.room.join_rules"
     <br/>
     }
     <br/>
     ]
     <br/>
     }
     <br/>
     }
    </span>
   </th>
  </tr>
 </tbody>
</table>
<p id="polarion_45">
</p>
<p id="polarion_109">
 <span style="text-decoration: line-through;background-color: #FFFF33;">
  <span id="polarion-comment:142">
  </span>
 </span>
</p>
<p id="polarion_68">
 <span style="font-weight: bold;background-color: #FFFF99;">
  <span id="polarion-comment:135">
  </span>
 </span>
 <span style="font-weight: bold;">
  Profiles Endpunkt (Punkt 11.2 Client-Server API)
 </span>
</p>
<p id="polarion_84">
 Der Messenger-Proxy MUSS verhindern, dass Nutzer den eigenen Displaynamen ändern können. Der Displayname darf nur durch einen
 <span id="polarion-comment:244">
 </span>
 Nutzer in der Rolle
 <span style="font-style: italic;">
  Org-Admin
 </span>
 geändert werden.
</p>
<p id="polarion_114">
</p>
<h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122818">
 5.2.1.3 PASSporT-Service
</h5>
<p id="polarion_17">
 Der PASSporT-Service des Messenger-Service stellt für einen Nutzer ein
 <span style="font-style: italic;">
  Personal Assertion Token
 </span>
 (PASSporT) gemäß [RFC 8225] aus, wenn die Nutzung des PASSporT-Service des VZD-FHIR-Directory nicht möglich ist. Das ist z. B. der Fall, wenn der relevante Kommunikationspartner nicht im VZD-FHIR-Directory eingetragen ist. Welche Kommunikationsmöglichkeiten zwischen den jeweiligen Nutzer möglich sind wird in [gemSpec_TI-Messenger-Dienst#3.3] beschrieben.
 <span style="background-color: #FFFFCC;">
  <span id="polarion-comment:197">
  </span>
 </span>
</p>
<p id="polarion_89">
 In der folgenden Tabelle sind alle Ressourcen mit den jeweiligen HTTP-Methoden dargestellt. Die jeweilige Operation ist eine Abstraktion auf einen Webservice Endpunkt.
</p>
<p id="polarion_100">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_107" style="text-align: left;">
 Tabelle
 <span class="polarion-rte-caption" data-sequence="Tabelle">
  #
 </span>
 : Schnittstelle - PASSporT-Service
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=uid=101|width=93.93%" style="width: 93.93%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 107px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Operation
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 77px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    URI
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 57px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Methode
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 80px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Request
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 98px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Response
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 231px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Beschreibung
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 107px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     get_passport
    </span>
   </td>
   <td style="text-align: left;vertical-align: top;width: 77px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    /user/{mxid}
   </td>
   <td style="text-align: left;vertical-align: top;width: 57px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    GET
   </td>
   <td style="text-align: left;vertical-align: top;width: 80px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    string
    <br/>
    &lt;MXID&gt;
   </td>
   <td style="text-align: left;vertical-align: top;width: 98px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    string
    <br/>
    &lt;PASSporT&gt;
   </td>
   <td style="text-align: left;vertical-align: top;width: 231px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    liefert ein für den anfragenden Nutzer ausgestelltes PASSporT
    <br/>
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_102">
</p>
<p id="polarion_143">
 Es ist folgender Endpunkt zu verwenden:
</p>
<table id="polarion_194">
 <tbody>
  <tr>
   <td>
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     servers:
    </span>
   </td>
  </tr>
  <tr>
  </tr>
 </tbody>
</table>
<p id="polarion_197">
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  - GET /_matrix/client/unstable/
  <span style="font-size: 10pt;line-height: 1.5;">
   de.gematik.tim.passport
  </span>
  /user/{mxid}
  <span id="polarion-comment:43">
  </span>
 </span>
</p>
<p id="polarion_198">
</p>
<p id="polarion_138">
 Vor der Herausgabe des PASSporT durch den PASSporT-Service sind die Berechtigungen der beabsichtigten Teilnehmer zu prüfen. Dies betrifft zum einen die Berechtigung eines Nutzers die beabsichtigte Kommunikationsbeziehung aufzubauen und zum anderen, ob die übergebene MXID
 <span id="polarion-comment:203">
 </span>
 eines Nutzers einen in der Föderation enthaltenen Messenger-Service ausweist. Sollte es bei der Prüfung zu einem Fehler kommen, MÜSSEN die folgenden Fehlercodes verwendet werden.
</p>
<p id="polarion_170">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_101" style="text-align: left;">
 Tabelle
 <span class="polarion-rte-caption" data-sequence="Tabelle">
  #
 </span>
 Error-Code PASSporT-Service
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=uid=1|width=75.36%" style="width: 75.36%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 150px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Error-Code
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 396px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    Beschreibung
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 150px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    403 Forbidden
   </td>
   <td style="text-align: left;vertical-align: top;width: 396px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    der Nutzer ist nicht berechtigt ein PASSporT für den
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     Invite
    </span>
    auszulösen
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 150px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    404 Not Found
   </td>
   <td style="text-align: left;vertical-align: top;width: 396px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    die übergebe MXID ist nicht von einem Nutzer innerhalb der Föderation
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 150px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    503 Service Unavailable
   </td>
   <td style="text-align: left;vertical-align: top;width: 396px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    der PASSporT-Service ist nicht erreichbar
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 150px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    500 Internal Server Error
   </td>
   <td style="text-align: left;vertical-align: top;width: 396px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    interner Server Error
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_171">
</p>
<p id="polarion_201">
 <span style="font-weight: bold;">
  Aufbau des PASSporT
 </span>
</p>
<p id="polarion_212">
 Der Aufbau des PASSporT MUSS wie im [RFC 8225] beschrieben erfolgen. Die Befüllung der gezeigten Header Elemente MUSS wie im [RFC 8225] gefordert erfolgen und wie folgt aufgebaut sein:
</p>
<p id="polarion_33">
</p>
<p id="polarion_29">
 <span style="font-weight: normal;font-style: normal;">
 </span>
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=uid=108" style="width: 80%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     <span style="font-weight: normal;font-style: normal;">
      Header:
     </span>
     <br/>
     <span style="font-weight: normal;font-style: normal;">
      {
     </span>
     <br/>
     <span style="font-weight: normal;font-style: normal;">
      "typ":"passport",
     </span>
     <br/>
     <span style="font-weight: normal;font-style: normal;">
      "alg":"ES256",
     </span>
     <br/>
     <span style="font-weight: normal;font-style: normal;">
      "x5u":"https://cert.example.org/passport.cer"
     </span>
     <br/>
     <span style="font-weight: normal;font-style: normal;">
      }
     </span>
     <br/>
    </span>
   </th>
  </tr>
 </tbody>
</table>
<pre id="polarion_178"></pre>
<p id="polarion_119">
 Das Erstellen des PASSporT MUSS durch den PASSporT-Service des beabsichtigten Kommunikationspartners erfolgen. Die TI-Messenger-spezifischen PASSporT-Claims sind durch den PASSporT-Service wie folgt zu befüllen. Der Claim mit dem Bezeichner "
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  orig
 </span>
 " ist die MXID des Nutzers, der das
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  invite
 </span>
 auslösen wird. Diese MXID
 <span id="polarion-comment:115">
 </span>
 wird durch den Nutzer an den gewünschten Kommunikationspartner übergeben. Der Claim "
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  dest
 </span>
 " wird mit der MXID des damit einzuladenden Nutzers befüllt. Das folgende Beispiel zeigt eine solche Struktur.
</p>
<pre id="polarion_182"></pre>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=uid=2" style="width: 80%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 592px;height: 60px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-weight: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     Claims:
     <br/>
     {
     <br/>
     "orig": {
     <br/>
     "uri": "matrix:u/me:example.org"
     <br/>
     },
     <br/>
     "dest": {
     <br/>
     "uri": [
     <br/>
     "matrix:u/you:example.org"
     <br/>
     ]
     <br/>
     }
     <br/>
     }
    </span>
   </th>
  </tr>
 </tbody>
</table>
<p id="polarion_52">
</p>
<p id="polarion_80">
 Das erzeugte PASSporT wird durch den PASSporT-Service mit einem Zertifikat aus der Komponenten PKI der TI
 <span id="polarion-comment:253">
 </span>
 signiert und anschließend an den TI-Messenger Client
 <span id="polarion-comment:66">
 </span>
 übergeben, der das
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  invite
 </span>
 auslöst. Die Zertifikate haben die keyUsage = digitalSignature.
 <span id="polarion-comment:254">
 </span>
</p>
<p id="polarion_188">
 Zur besseren Veranschaulichung dient die folgende Darstellung:
</p>
<p id="polarion_111">
</p>
<p class="polarion-rte-caption-paragraph" data-keep-next="true" id="polarion_99" style="text-align: left;">
 Tabelle
 <span class="polarion-rte-caption" data-sequence="Tabelle">
  #
 </span>
 : Ablauf PASSporT-Erstellung
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=9" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 164.578px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Client A
    <span id="polarion-comment:37">
    </span>
   </th>
   <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 415.609px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Client B
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 164.578px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-size: 10pt;line-height: 1.5;">
     1: Client A übergibt seine MXID an den Client B
    </span>
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 415.609px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 164.578px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 415.609px;height: 40px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-size: 10pt;line-height: 1.5;">
     2: Client B nimmt MXID von A und übergibt diese an den  PASSporT-Service seines Messenger-Service
     <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
      &lt;get_passport&gt;
     </span>
    </span>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 164.578px;height: 61px;border: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 415.609px;height: 61px;border: 1px solid #CCCCCC;padding: 5px;">
    3: PASSporT-Service von B erzeugt PASSporT mit:
    <br/>
    „
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     dest
    </span>
    “: MXID von Nutzer B
    <br/>
    „
    <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
     Orig
    </span>
    “: MXID von Nutzer A
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 164.578px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
   </td>
   <td style="text-align: left;vertical-align: top;width: 415.609px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-size: 10pt;line-height: 1.5;">
     4: PASSporT wird von B an den Client A übergeben
    </span>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 164.578px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-size: 10pt;line-height: 1.5;">
     5: Nutzer A löst invite an Nutzer B aus
    </span>
   </td>
   <td style="text-align: left;vertical-align: top;width: 415.609px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_133">
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122271">
 5.2.2 Registrierungs-Dienst
</h4>
<p id="polarion_135">
 <span style="font-size: 10pt;line-height: 1.5;">
  Der Registrierungs-Dienst MUSS ein Frontend oder Schnittstellen bereitstellen, damit ein interoperabler Onboarding-Prozess für die Registrierung von Messenger-Services gewährleistet wird. Der Registrierungs-Dienst MUSS es ermöglichen einen neuen Messenger-Service über ein Frontend zu erzeugen. So MUSS der Registrierungs-Dienst bei einer neuen Registrierungsanfrage automatisiert den durch den Smartcard IDP-Dienst ausgestellten
  <span id="polarion-comment:213">
  </span>
  ACCESS_TOKEN (gemäß Kapitel 4.2.1) validieren, einen dezentralen Messenger-Service automatisiert starten und die entsprechende Matrix-Domain (referenziert zur im Claim genannten Organisation) im VZD-FHIR-Directory hinterlegen.
 </span>
</p>
<p id="polarion_164">
 Für die Aufnahme eines TI-Messenger-Fachdienstes in die Föderation des TI-Messenger-Dienstes wird durch den Registrierungs-Dienst die Matrix Domain einer Organisation in das VZD-FHIR-Directory eingetragen. Der Registrierungs-Dienst eines TI-Messenger-Fachdienst MUSS sich gegenüber dem VZD-FHIR-Directory mittels OAuth2 Client Credentials Flow authentifizieren und ebenfalls als Anbieter auf dem VZD-FHIR-Directory gelistet sein. Der Registrierungs-Dienst MUSS die Domains der dezentralen Messenger-Services, referenziert auf die entsprechende Organization-Ressource als Endpoint hinterlegen. Genauere Angaben sind im VZD-FHIR-Directory Datenmodell zu finden.
</p>
<p id="polarion_121">
 Der Registrierungs-Dienst MUSS eine Liste aller verifizierten Domains aus dem VZD-FHIR-Directory für die dezentralen Messenger-Proxies bereitstellen. Dazu wird die im VZD-FHIR-Directory bereitgestellte Operation
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  GET/FederationList
 </span>
 aufgerufen. Um die Schnittstelle nutzen zu können MUSS sich der Registrierungs-Dienst des TI-Messenger-Anbieters, wie bereits oben erwähnt, mit einem Accesstoken authentisieren, das vom OAuth-Server des VZD-Anbieters ausgestellt wurde. Mit der Operation
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  GET/FederationList
 </span>
 MUSS die Liste der an der TI-Messenger-Föderation beteiligten Matrix-Domainnamen abgefragt werden. Die Abfrage der
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  FederationList
 </span>
 MUSS mindestens einmal am Tag erfolgen. Die Prüfung auf Aktualität dieser Föderationsliste beim VZD-FHIR-Directory MUSS bei jeder Anfrage durch einen Matrix-Proxy zur Bereitstellung der Föderationsliste erfolgen. Nach dem Erhalt dieser Liste MUSS diese durch den Messenger-Proxy für die Prüfung der Domainzugehörigkeit genutzt werden. Der Registrierungs-Dienst MUSS für den Abruf dieser
 <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
  FederationList
 </span>
 durch die Messenger-Proxy eine Schnittstelle bereitstellen.
 <span id="polarion-comment:46">
 </span>
 Als Ergebnis erhält der Registrierungs-Dienst eine Liste der hashes der an der Föderation beteiligten Domainnamen.
</p>
<p id="polarion_60">
 Vor der Ausgabe eines PASSporT durch den PASSporT-Service im VZD-FHIR-Directory wird dieser vom PASSporT-Service signiert. Der Registrierungs-Dienst des TI-Messenger-Fachdienstes MUSS für die Prüfung der Gültigkeit dieser Signatur durch
 <span style="text-decoration: line-through;">
  <span id="polarion-comment:136">
  </span>
 </span>
 die Messenger-Proxies die dafür benötigten Zertifikate mit dem öffentlichen Schlüssel des PASSporT-Services im VZD-FHIR-Directory über die Operation
 <span style="font-size: 10pt;line-height: 1.5;">
  <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
   GET/PASSporTCertificate
  </span>
  vom VZD-FHIR-Directory abfragen und für die spätere Nutzung durch die
  <span id="polarion-comment:127">
  </span>
  Messenger
  <span style="text-decoration: line-through;">
   -
  </span>
  Proxies abspeichern. Der Registrierungs-Dienst MUSS für den Abruf dieses
  <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">
   PASSporTCertificate
  </span>
  durch die
  <span id="polarion-comment:128">
  </span>
  Messenger
  <span style="text-decoration: line-through;">
   -
  </span>
  Proxies eine Schnittstelle bereitstellen.
 </span>
</p>
<p id="polarion_165">
</p>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122272">
 5.2.3 Push-Gateway
</h4>
<p id="polarion_155">
 Der TI-Messenger-Fachdienst MUSS einen Push-Gateway, gemäß Matrix-Spezifikation, für den TI-Messenger-Client bereitstellen. Es obliegt den
 <span id="polarion-comment:137">
 </span>
 TI-Messenger-Anbietern der einzelnen TI-Messenger-Clients,
 <span id="polarion-comment:129">
 </span>
 ob eine Push-Funktion unterstützt wird.
</p>
<p id="polarion_210">
</p>
<h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118387">
 6 Anhang A – Verzeichnisse
</h2>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118388">
 6.1 Abkürzungen
</h3>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=1" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;">
    Kürzel
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 612px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;">
    Erläuterung
    <br/>
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    <span id="polarion-comment:140">
    </span>
    API
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Application Programming Interface
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    AuthN
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Authentication
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    AuthZ
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Authorization
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    CC
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Common Criteria
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    DSGVO
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Datenschutz-Grundverordnung
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    FHIR
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Fast Healthcare Interoperable Resources
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    HBA
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Heilberufsausweis
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    HTTP
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Hyptertext Transfer Protocol
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    IDP
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    <span style="font-size: 9pt;line-height: 1.5;">
     Identity Provider
    </span>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    JSON
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    JavaScript Object Notation
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    KVNR
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Krankenversichertennummer
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    MSC
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix Spec Change
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    MXID
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix-ID
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    OAuth
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Open Authorization
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    PASSporT
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Personal Assertion Token
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    SMC-B
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Institutionenkarte (Security Module Card Typ B)
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    SSSS
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Secure Secret Storage and Sharing
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    TI
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Telematikinfrastruktur
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    TLS
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Transport Layer Security
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    UIA
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    User Interactive Authorization
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    VZD
   </td>
   <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Verzeichnisdienst
    <br/>
   </td>
  </tr>
 </tbody>
</table>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118389">
 6.2 Glossar
</h3>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=2" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 195px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Begriff
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 536px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Erläuterung
    <br/>
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    MXID
   </td>
   <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">
    Eindeutige Identifikation eines TI-Messenger-Nutzers (Matrix-User-ID)
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    on-premise
   </td>
   <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Das Produkt wird auf eigener oder gemieteter Hardware betrieben
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Relying Party
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Vertraurungswürdige Komponente, die Zugriff auf eine sichere Anwendung ermöglicht
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    X.509-Zertifikat
   </td>
   <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">
    Ein Public-Key-Zertifikat nach dem X.509-Standard
    <br/>
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_181">
 Das Glossar wird als eigenständiges Dokument (vgl. [gemGlossar]) zur Verfügung gestellt.
</p>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118390">
 6.3 Abbildungsverzeichnis
</h3>
<div data-sequence="Abbildung" id="polarion_wiki macro name=tof;params=uid=1">
</div>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118391">
 6.4 Tabellenverzeichnis
</h3>
<div data-sequence="Tabelle" id="polarion_wiki macro name=tof;params=uid=2">
</div>
<h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118392">
 6.5 Referenzierte Dokumente
</h3>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-118393">
 6.5.1 Dokumente der gematik
</h4>
<p id="polarion_186">
 Die nachfolgende Tabelle enthält die Bezeichnung der in dem vorliegenden Dokument referenzierten Dokumente der gematik zur Telematikinfrastruktur. Der mit der vorliegenden Version korrelierende Entwicklungsstand dieser Konzepte und Spezifikationen wird pro Release in einer Dokumentenlandkarte definiert; Version und Stand der referenzierten Dokumente sind daher in der nachfolgenden Tabelle nicht aufgeführt. Deren zu diesem Dokument jeweils gültige Versionsnummern sind in der aktuellen, von der gematik veröffentlichten Dokumentenlandkarte enthalten, in der die vorliegende Version aufgeführt wird.
</p>
<p id="polarion_187">
</p>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=4" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [Quelle]
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Herausgeber: Titel
    <br/>
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemGlossar]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Einführung der Gesundheitskarte – Glossar
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemKPT_TI_Messenger]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Konzeptpapier TI-Messenger
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemSpec_TI_Messenger-Dienst]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Spezifikation TI-Messenger-Dienst
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemKPT_Betr]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Betriebskonzept Online-Produktivbetrieb
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemSpec_Perf]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Übergreifend Spezifikation Performance und Mengengerüst TI-Plattform
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemSpec_Krypt]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Übergreifende Spezifikation Verwendung kryptographischer Algorithmen in der
    <br/>
    Telematikinfrastruktur
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [gemSpec_IDP_FD]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    gematik: Spezifikation Identity Provider – Nutzungsspezifikation für Fachdienste
    <br/>
   </td>
  </tr>
 </tbody>
</table>
<h4 id="polarion_wiki macro name=module-workitem;params=id=ML-118394">
 6.5.2 Weitere Dokumente
</h4>
<table class="polarion-Document-table" id="polarion_wiki macro name=table;params=width=100%|uid=5" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;">
 <tbody>
  <tr>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [Quelle]
    <br/>
   </th>
   <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Herausgeber (Erscheinungsdatum): Titel
    <br/>
   </th>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [Matrix Foundation]
    <br/>
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix Foundation
    <span id="polarion-comment:220">
    </span>
    <br/>
    <a class="descriptionLink" href="https://matrix.org/docs/spec/" target="_top">
     https://matrix.org/docs/spec/
    </a>
    <br/>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [Federation API]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    Matrix Foundation
    <span id="polarion-comment:221">
    </span>
    <br/>
    <a class="descriptionLink" href="https://matrix.org/docs/spec/server_server/r0.1.4" target="_top">
     https://matrix.org/docs/spec/server_server/r0.1.4
    </a>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [RFC 8225]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    PASSporT: Personal Assertion Token
    <br/>
    <a class="descriptionLink" href="https://datatracker.ietf.org/doc/html/rfc8225" target="_top">
     https://datatracker.ietf.org/doc/html/rfc8225
    </a>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [OpenID]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    OpenID Foundation
    <br/>
    <a class="descriptionLink" href="https://openid.net/developers/specs/" target="_top">
     https://openid.net/developers/specs/
    </a>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [OWASP Proactive Control]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    OWASP Proactive Controls
    <br/>
    <a class="descriptionLink" href="https://owasp.org/www-project-proactive-controls/" target="_top">
     https://owasp.org/www-project-proactive-controls/
    </a>
   </td>
  </tr>
  <tr>
   <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    [MSC 3013]
   </td>
   <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">
    <a class="descriptionLink" href="https://github.com/matrix-org/matrix-doc/pull/3013" target="_top">
     https://github.com/matrix-org/matrix-doc/pull/3013
    </a>
    <span style="background-color: #FFFF99;">
     <span id="polarion-comment:245">
     </span>
     <span id="polarion-comment:246">
     </span>
    </span>
   </td>
  </tr>
 </tbody>
</table>
<p id="polarion_196">
</p>
</div>
</body>
</html>